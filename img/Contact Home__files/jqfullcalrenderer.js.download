/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2016
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 16.16.0.0SIA[23057]PATCHSET16 */
typeof SiebelAppFacade.JQFullCalRenderer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.JQFullCalRenderer"),define("siebel/jqfullcalrenderer",["3rdParty/moment.min.js","3rdParty/fullcalendar/fullcalendar.js","3rdParty/jquery.ui.touch-punch.min.js","siebel/caldetailpr"],function(){return SiebelAppFacade.JQFullCalRenderer=function(){function e(){SiebelAppFacade.JQFullCalRenderer.superclass.constructor.apply(this,arguments);var e=$(),t=0,n=this.GetPM(),r={},i={},s={},o={};this.GetCal=function(){return e},this.SetCal=function(t){e=t},this.SetCalContHeight=function(e){t=e},this.GetCalContHeight=function(){return t},this.GetLocaleConverter=function(){return r},this.SetLocaleConverter=function(e){r=e},this.GetUtilityMap=function(){return i},this.SetUtilityMap=function(e){i=e},this.GetCalCtrlBuilder=function(){return s},this.SetCalCtrlBuilder=function(e){s=e},this.GetEventHandlerMap=function(){return o},this.SetEventHandlerMap=function(e){o=e},this.SetDefaultView=function(){if(!n.Get("ViewMode")){var e=n.Get("Default Calendar Mode"),t;switch(e){case"Monthly":t="2";break;case"Weekly":t="1";break;case"Daily":t="0";break;default:t="0"}n.AddProperty("ViewMode",t)}}}function t(){var e=this.GetPM();$("#"+e.Get("GetFullId")).css("overflow-x","auto"),this.SetDefaultView(),this.SetCal($("#calendar_"+this.GetPM().Get("GetPlaceholder"))),this.SetLocaleConverter(new SiebelAppFacade.CalLocaleConverter),this.SetUtilityMap(new SiebelAppFacade.CalUtility),this.SetCalCtrlBuilder(new SiebelAppFacade.CalCtrlBuilder(e,this.GetCal(),this.GetUtilityMap())),this.SetEventHandlerMap(new SiebelAppFacade.CalEventHandlers(e,this.GetCal(),this.GetCalCtrlBuilder(),this.GetUtilityMap()))}function n(){var e=this.GetPM();e.AddProperty("SelectedDate",new Date(e.Get("ReturnStartDate"))),e.AddProperty("ReturnStartDate","")}function r(){var e=this.GetPM(),t=this.GetCal(),n=this.GetUtilityMap(),r,i=e.Get("ViewMode"),s=e.Get("SelectedDate");s&&(r=moment(s),(r.isAfter(t.fullCalendar("getDate"))||r.isBefore(t.fullCalendar("getDate")))&&t.fullCalendar("gotoDate",s));if(i&&i!==n.ViewNameToMode(t.fullCalendar("getView").name)){var o=n.SplitViewName(t.fullCalendar("getView").name);t.find(".siebui-cal-btn-"+o).removeClass("disabled"),t.find(".siebui-cal-btn-"+o+"-txt").removeClass("disabled");if(window.matchMedia("(max-width: 1199px)").matches&&$("#_FormParentRelatedItemsOuterCont").length>0){var u=t.fullCalendar("option","defaultView");e.AddProperty("ViewMode",n.ViewNameToMode(u)),t.fullCalendar("changeView",u)}else t.fullCalendar("changeView",n.ViewModeToName(i))}}function i(){var e=this.GetPM(),t=e.Get("Start Day of the Week"),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=$.inArray(t,n),i=[e.Get("Sunday Workday Flag"),e.Get("Monday Workday Flag"),e.Get("Tuesday Workday Flag"),e.Get("Wednesday Workday Flag"),e.Get("Thursday Workday Flag"),e.Get("Friday Workday Flag"),e.Get("Saturday Workday Flag")],s=[],o=[];if(typeof t=="undefined"||r===-1)r=parseInt(e.Get("First Day of Week"),10);e.AddProperty("Week Day Number",r);var u=i.length;for(var a=0;a<u;a++){if(typeof i[a]=="undefined"){s=[r+5,r+6];break}i[a]!=="Y"&&i[a]!=="1"?s.push(a):o.push(a)}e.AddProperty("Hidden Days",s),e.Get("Preferred Weekly Mode")!=="5 Day Weekly"&&(o=[0,1,2,3,4,5,6]);var f=o.indexOf(r),l=[];for(var a=f;a<o.length;a++)l.push(o[a]);for(var a=0;a<f;a++)l.push(o[a]);e.AddProperty("Available Days",l)}function s(){var e=this.GetPM(),t=this.GetCal(),n=t.fullCalendar("getView"),r=this.GetUtilityMap().SplitViewName(n.name);this.GetCalCtrlBuilder().AddControls(),t.find(".siebui-cal-btn-"+r).addClass("disabled"),t.find(".siebui-cal-btn-"+r+"-txt").addClass("disabled"),n.name!=="month"&&this.GetCalCtrlBuilder().AddMouseControls(),e.AddProperty("MultViewFrames",$("#_swecontent").find("[id^='_svf']").filter(function(){return this.clientHeight!==0}).length),this.resize(),e.SetProperty("FirstLoad",!1)}function o(){var e=this.GetPM();if(e.Get("UseCalendarPane")!=="Y")return;var t=$(".siebui-calpane");if($(t).not(":visible")||$(t).is(":hidden"))$("#s_calendarContainer").addClass("siebui-cal-full-width"),$(t).addClass("siebui-calpane-hide");$("#calPaneContent").accordion({header:".siebui-accordion",heightStyle:"content",active:0,collapsible:!0,animate:!1}),$("#calPaneSubContent").accordion({header:".siebui-accordion",heightStyle:"content",active:!1,collapsible:!0,animate:!1});var n=this.GetUtilityMap();n.AttachAutoAttributes($(".siebui-calpane .siebui-icon-drilldown"),"Button","calPaneDrilldown"),$("#s_calendarPane .siebui-accordion").each(function(){var e=$(this).attr("id");n.AttachAutoAttributes($(this),"AccordionTab",e)})}function u(e){var t=this.GetPM();if(t.Get("UseCalendarPane")!=="Y")return;var n=this.GetCal(),r="siebui-cal-event-active",i=n.find("."+r);i.length!==0&&i.removeClass(r);if(e&&!$(".siebui-calpane").is(":hidden")){var s=t.Get("GetBusComp"),o=s.GetIdValue();i=n.find(".fc-event-container > [data-drilldown*='"+o+"']"),i.length===1&&i.addClass(r)}}function a(){if(!v.call(this))return;var e=this.GetPM(),t=this.GetCal(),n=e.Get("RTL Mode")!=="Y"?"left":"right",r=t.width(),i=$(".siebui-calpane").width(),s=e.Get("SelectedEvent"),o=s.left,u=o+s.width;if(t.fullCalendar("getView").name==="agendaDay"){var a=100;s.width>a&&(n==="left"?u=o+a:o=u-a)}var f=r-i,l=n==="left"?r-o:u;if(f>0)if(n==="left"&&u>f||n==="right"&&r-o>f){var c=0,h=f-l;h>0?c=n==="left"?o-h:r-u-h:c=n==="left"?o-10:r-u-5,c!==0&&$(".fc-view-container").css(n,-c+"px").css("position","relative")}}function f(){var e=this.GetPM();if(e.Get("UseCalendarPane")!=="Y"||$(".siebui-calpane").is(":hidden"))return;var t=this.GetCal(),n=t.height(),r=t.fullCalendar("option","contentHeight"),i=this.GetCalContHeight(),s=$("#calPaneHeader").outerHeight(!0)+$("#calPaneContent").outerHeight(!0)+$("#calPaneSubContent").outerHeight(!0);s>n?r+=s-n:s<n&&(r-=n-s,r<i&&(r=i)),t.fullCalendar("option","contentHeight",r)}function l(){var e=this.GetPM();e.Get("OpenCalPane")&&$(".siebui-calpane").is(":hidden")&&($(".siebui-calpane"
).removeClass("siebui-calpane-hide").addClass("siebui-calpane-show"),$("#s_calendarContainer").removeClass("siebui-cal-full-width"),v.call(this)&&a.call(this),this.GetCalContHeight()===0&&this.SetCalContHeight(this.GetCal().fullCalendar("option","contentHeight")),f.call(this))}function c(){var e=this.GetPM();if(e.Get("CloseCalPane")){$(".siebui-calpane").removeClass("siebui-calpane-show").addClass("siebui-calpane-hide"),$("#s_calendarContainer").addClass("siebui-cal-full-width"),e.SetProperty("OpenCalPane",!1),e.SetProperty("CloseCalPane",!1),u.call(this,!1);if(v.call(this)){var t=e.Get("RTL Mode")!=="Y"?"left":"right";$(".fc-view-container").css(t,"").css("position","")}this.GetCal().fullCalendar("option","contentHeight",this.GetCalContHeight())}}function h(e){var t=e.data.ctx.GetPM(),n="",r="",i="",s="",o="",u="#",a="",f="",l=4;i=t.Get("Display Fields");if(i!==""){var c=i.split(",");s=c[0].replace(/^\s+|\s+$/g,""),a=1}typeof (t.Get("Special Date Buscomp Name")==="undefined")?o="N":o="Y";var h=t.Get("GetBusComp");typeof h.GetIdValue!="undefined"&&(n=h.GetIdValue(),r=h.GetName(),f=l+u+n.length+u+n+r.length+u+r,f+=s.length+u+s+a+u+o),SiebelApp.Utils.IsEmpty(n)||t.OnControlEvent(SiebelApp.Constants.get("PHYEVENT_DRILLDOWN_LIST"),f)}function p(){var e=this.GetPM();if(e.Get("UseCalendarPane")!=="Y"||$(".siebui-calpane").is(":hidden"))return;var t=e.Get("GetBusComp"),n=t.GetFieldValue("Repeating Type LIC");n=n.toLowerCase(),n==="repappt_nonrepeating"?$(".siebui-calpane-rept-toggle").hide():$(".siebui-calpane-rept-toggle").each(function(){var e=$(this).attr("id");e==="calPane_repappt_common_top"||e==="calPane_repappt_common_bottom"||e==="calPane_"+n?$(this).show():$(this).hide()}),f.call(this)}function d(){var e=this.GetPM();if(e.Get("UseCalendarPane")!=="Y")return;var t=e.ExecuteMethod("GetControl","AllDay");t&&e.SetProperty("IsAllDay",e.ExecuteMethod("GetFormattedFieldValue",t)==="Y"),p.call(this),u.call(this,!0)}function v(){var e=this.GetPM();if(e.Get("UseCalendarPane")!=="Y")return;var t=$(".siebui-calpane"),n=this.GetCal(),r=n.zIndex(),i=t.zIndex(),s=n.width(),o=t.width();return i>r&&o<s?!0:!1}return SiebelJS.Extend(e,SiebelAppFacade.CalDetailPR),e.prototype.Init=function(){SiebelAppFacade.JQFullCalRenderer.superclass.Init.call(this);var e=this.GetPM();this.AttachPMBinding("ParseEventInfoOUI",function(){e.AddProperty("SelectedDate",new Date(e.Get("Default Selected Day")))},{scope:this,when:function(){return e.Get("FirstLoad")&&e.Get("Default Selected Day")}}),this.AttachPMBinding("ParseEventInfoOUI",n,{scope:this,when:function(){return e.Get("ReturnStartDate")&&e.Get("ReturnStartDate")!==""}}),this.AttachPMBinding("ParseEventInfoOUI",r,{scope:this,when:function(){return e.Get("FirstLoad")}}),this.AttachPMBinding("ParseEventInfoOUI",this.BindData),this.AttachPMBinding("ForceWindowResize",function(){e.Get("ForceWindowResize")===!0&&($(window).trigger("resize"),e.SetProperty("ForceWindowResize",!1))}),this.AttachPMBinding("NeedRefetchEvents",function(){e.Get("NeedRefetchEvents")&&(this.GetCal().fullCalendar("refetchEvents"),e.SetProperty("NeedRefetchEvents",!1))}),this.AttachPMBinding("OpenCalPane",l,{scope:this,when:function(){return e.Get("UseCalendarPane")==="Y"}}),this.AttachPMBinding("CloseCalPane",c,{scope:this,when:function(){return e.Get("UseCalendarPane")==="Y"}}),this.AttachPMBinding("RefreshRepeatLayout",function(){e.Get("RefreshRepeatLayout")&&(p.call(this),e.SetProperty("RefreshRepeatLayout",!1))}),this.AttachPMBinding("ShowSelection",d,{scope:this,when:function(){return e.Get("UseCalendarPane")==="Y"}}),SiebelApp.EventManager.addListner("refreshview",this.resize,this),SiebelApp.EventManager.addListner("forceResize",this.resize,this)},e.prototype.BindEvents=function(e){SiebelAppFacade.JQFullCalRenderer.superclass.BindEvents.call(this);var t=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");t&&(t.Manage($(window),"resize.JQFullCalRenderer",{ctx:this},function(e){var t=e.data.ctx,n=t.GetPM();e.target===window&&n.Get("ForceWindowResize")===!1&&(t.resize(),n.Get("UseCalendarPane")==="Y"&&(t.SetCalContHeight(t.GetCal().fullCalendar("option","contentHeight")),f.call(t)))}),t.Manage($("#openSidebarButton"),"click.JQFullCalRenderer",{ctx:this},function(e){e.data.ctx.resize()}),t.Manage($("#sidebarCloseButton"),"click.JQFullCalRenderer",{ctx:this},function(e){e.data.ctx.resize()}),t.Manage($(".siebui-calpane .siebui-icon-drilldown"),"click",{ctx:this},h),t.Manage($(".siebui-calpane .siebui-accordion"),"click",{ctx:this},function(e){f.call(e.data.ctx)})),this.GetPM().Get("Enable External Drag And Drop")==="Y"&&t&&(t.Manage(this.GetCal(),"dragover",function(e){e.preventDefault()}),t.Manage(this.GetCal(),"drop",{ctx:this},this.GetEventHandlerMap().OnExtHTMLDropHandler))},e.prototype.GetOptions=function(){var e=this.GetPM(),t=this.GetEventHandlerMap(),n={left:"",center:"today prev title next",right:""},r={allDaySlot:e.Get("AllowAllDay"),allDayText:e.Get("UISTR All Day Event"),axisFormat:e.Get("24 Hour Flag")==="Y"?"H(:mm)":"h(:mm)a",buttonText:{today:e.Get("UISTR Today Button"),month:e.Get("UISTR Monthly Tab"),week:e.Get("UISTR Weekly Tab"),day:e.Get("UISTR Daily Tab"),prev:"",next:"",prevYear:"",nextYear:""},contentHeight:500,dayClick:function(){t.OnDayClick.apply(t,arguments)},dayNames:e.Get("WeekDayStringArray"),defaultView:this.GetUtilityMap().ViewModeToName(e.Get("ViewMode")),dragOpacity:0,dragScroll:!1,droppable:e.Get("Enable External Drag And Drop")==="Y",drop:function(){var e=Array.prototype.slice.call(arguments,0);e.push(this),t.OnExtJQueryDropHandler.apply(t,e)},editable:e.Get("CanUpdate"),eventAfterRender:function(){t.OnEventAfterRender.apply(t,arguments)},eventClick:function(){t.OnEventClick.apply(t,arguments)},eventDestroy:function(){t.OnEventDestroy.apply(t,arguments)},eventDragStop:function(){t.OnEventDragStop.apply(t,arguments)},eventDrop:function(){t.OnEventDrop.apply(t,arguments)},eventDurationEditable:e.Get("CanUpdate"),eventRender:function(){t.OnEventRender.apply(t
,arguments)},eventResize:function(){t.OnEventResize.apply(t,arguments)},events:function(){t.OnEventRefresh.apply(t,arguments)},firstDay:e.Get("Week Day Number"),scrollTime:moment.duration(e.Get("Preferred Business Day Start Time")),header:n,hiddenDays:[],isRTL:e.Get("RTL Mode")==="Y",lazyFetching:!1,longDateFormat:e.Get("Long Date Format"),monthNames:e.Get("MonthStringArray"),select:function(){t.OnCalSelect.apply(t,arguments)},selectable:e.Get("CanInsert")&&(typeof e.Get("Enable Quick Add")=="undefined"||e.Get("Enable Quick Add").toLowerCase()!=="n"&&e.Get("Enable Quick Add").toLowerCase()!=="false"),selectHelper:e.Get("CanInsert")&&(typeof e.Get("Enable Quick Add")=="undefined"||e.Get("Enable Quick Add").toLowerCase()!=="n"&&e.Get("Enable Quick Add").toLowerCase()!=="false"),slotEventOverlap:!1,slotDuration:moment.duration(parseInt(e.Get("Preferred Timeslot Interval"),10),"m"),timeFormat:"h(:mm)t",viewRender:function(){t.OnViewDisplayChange.apply(t,arguments)},weekends:!0,fixedWeekCount:!1,eventLimit:!1,eventLimitClick:function(){return t.OnEventLimitClick.apply(t,arguments)},eventLimitText:"...",views:{agenda:{timeFormat:" "},agendaDay:{columnFormat:" ",titleFormat:e.Get("Long Date Format")},agendaWeek:{columnFormat:"dddd%MMM%DD",hiddenDays:e.Get("Preferred Weekly Mode")!=="7 Day Weekly"?e.Get("Hidden Days"):[],titleFormat:" "},month:{columnFormat:"dddd",eventLimit:4,titleFormat:"MMMM YYYY"}}},i=this.GetLocaleConverter().ConvertLocale(r);return r=$.extend(!0,{},r,i),r},e.prototype.ShowUI=function(){SiebelAppFacade.JQFullCalRenderer.superclass.ShowUI.call(this);if($("#calendar_"+this.GetPM().Get("GetPlaceholder")).length===0)return;var e=this.GetPM();t.call(this),i.call(this);var n=this.GetOptions();e.AddProperty("ShortMonthNames",n.monthNamesShort),e.AddProperty("ShortDayNames",n.dayNamesShort),this.GetCal().fullCalendar(n),s.call(this),o.call(this)},e.prototype.resize=function(){if(SiebelApp.Utils.IsEmpty(this.GetPM()))return;if($("#calendar_"+this.GetPM().Get("GetPlaceholder")).length===0)return;var e=this.GetPM(),t=this.GetCal(),n,r=SiebelApp.S_App.IsRwd()?$("#"+SiebelApp.S_App.ViewTarget()):$("#_sweview");$(r).find(".siebui-applet").each(function(){$(this).find(".fc-view-container").length===0&&$(this).removeClass("hide")}),$("#_FormParentRelatedItemsOuterCont").removeClass("hide"),$("#"+e.Get("GetFullId")).width(0).width("auto"),$("#s_"+e.Get("GetFullId")+"_div").width(0).width("auto"),n=Math.max(t.find(".fc-toolbar").width(),$("#s_"+e.Get("GetFullId")+"_div").width(),t.find(".fc-agenda-view").width(),t.find(".siebui-short-hdr").width()),n!==$("#s_"+e.Get("GetFullId")+"_div").width()&&(n===t.find(".fc-agenda-view").width()&&e.Get("FirstLoad")?($("#s_"+e.Get("GetFullId")+"_div").width(n+200),t.fullCalendar("render")):$("#s_"+e.Get("GetFullId")+"_div").width(n)),(e.Get("ViewMode")==="1"||e.Get("ViewMode")==="2")&&window.matchMedia("(max-width: 1199px)").matches&&!e.Get("FirstLoad")&&!$("#"+e.Get("GetFullId")).parent().hasClass("siebui-sub-applets")&&($(r).find(".siebui-applet").each(function(){$(this).find(".fc-view-container").length===0&&$(this).addClass("hide")}),$("#_FormParentRelatedItemsOuterCont").addClass("hide"),$("#"+e.Get("GetFullId")).width(0),n=Math.max($("#_sweview").width(),t.find(".fc-toolbar").width()),$("#"+e.Get("GetFullId")).width(n),$("#s_"+e.Get("GetFullId")+"_div").width("auto"),n===t.find(".fc-toolbar").width()&&$("#s_"+e.Get("GetFullId")+"_div").width(n),e.Get("ViewMode")==="1"&&this.GetCalCtrlBuilder().BldWeekColHdr(t.fullCalendar("getView")),t.fullCalendar("option","contentHeight",t.fullCalendar("option","contentHeight"))),e.Get("FirstLoad")&&$(r).find(".siebui-view-multi-column").length>0&&(e.SetProperty("Enable 5Day Time Display","Never"),e.SetProperty("Enable Monthly Time Display","Never"));if(e.Get("MultViewFrames")===1)if($(window).height()!==e.Get("WindowHeight")||$(window).width()!==e.Get("WindowWidth")){e.AddProperty("WindowHeight",$(window).height()),e.AddProperty("WindowWidth",$(window).width());var i=$("#_swescrnbar").width()>=$("#_sweclient").width()*.9?$("#_swescrnbar").outerHeight(!0):0,s=($("#_sweclient").outerHeight(!0)-$("#_sweappmenu").outerHeight(!0)-$("#_swethreadbar").outerHeight(!0)-i)*.9;s-=t.find(".fc-center").outerHeight(!0),s-=t.find(".siebui-short-hdr").outerHeight(!0),s-=t.outerHeight(!0),s+=t.height(),t.fullCalendar("option","contentHeight",Math.max(100,Math.min(s,500)))}e.Get("FirstLoad")||this.GetCalCtrlBuilder().BldSlotIndicators(t.fullCalendar("getView")),$(".siebui-cal-popup").length>0&&$(".siebui-cal-popup").position({my:"center",at:"center",of:$(window)})},e.prototype.EndLife=function(){$(window).unbind("resize.JQFullCalRenderer"),$("#openSidebarButton").unbind("click.JQFullCalRenderer"),$("#sidebarCloseButton").unbind("click.JQFullCalRenderer"),$(".siebui-tooltip-calendar").remove(),SiebelApp.EventManager.removeListner("refreshview",this.resize,this),SiebelApp.EventManager.removeListner("forceResize",this.resize,this),this.GetCal().fullCalendar("destroy"),this.SetCal(null),this.SetLocaleConverter(null),this.SetUtilityMap(null),this.SetCalCtrlBuilder(null),this.SetEventHandlerMap(null),$(document).unbind("mouseup.JQFullCalRenderer"),SiebelAppFacade.JQFullCalRenderer.superclass.EndLife.call(this)},e.prototype.BindData=function(){var e=[],t=this.GetPM(),n=[],r=[],i=this.GetCal(),s=this.GetUtilityMap(),o,u,a;if(this.inProgress)return[];if($("#calendar_"+this.GetPM().Get("GetPlaceholder")).length===0)return;var f=t.Get("GetRecordSet"),l=t.Get("EventInfo");if(this.GetCal()&&l){var c=l.length;for(o=0;o<c;o++){var h=l[o],p=[],d=[],v=[],m,g,y=!1;h.Planned=moment(h.Planned,"MM-DD-YYYY HH:mm:ss"),h.PlannedCompletion=moment(h.PlannedCompletion,"MM-DD-YYYY HH:mm:ss");var b=moment(h.PlannedCompletion,"MM-DD-YYYY HH:mm:ss"),w=h.DisplayField.length;for(u=0;u<w;u++){g=h.DisplayField[u],(g.Name!=="Readonly"||!t.Get("CanUpdate"))&&g.FieldValue===""&&g.IconFile!==""&&(p.push(g.IconFile),d.push(g.ToolTip));if(g.FieldValue==="")continue;m=parseInt
(g.Sequence,10),v[m]=u}var E=[],S,x=v.length;for(a=1;a<x;a++)S=[],g=h.DisplayField[v[a]],S.FieldValue=g.FieldValue,S.ToolTip=g.ToolTip,S.DrillDown=g.DrillDown,S.FieldColor=g.FieldColor,S.CSSName=this.GetUtilityMap().IsAllDayEvent(h)?"calendar-DisplayField-AllDayEventFont":"calendar-DisplayField-Font"+a.toString(),E.push(S);var T=h.EventStyle.replace(/\s/g,"");typeof h.EventStyle!="undefined"&&($.inArray(h.EventLegend,n)<0&&n.push(h.EventLegend),typeof r[h.EventLegend]=="undefined"&&(r[h.EventLegend]=T));var N=this.GetUtilityMap().IsAllDayEvent(h);N&&b.add(1,"m");if(h.Planned.isSame(b)){y=!0;var C=parseInt(t.Get("Preferred Timeslot Interval"),10);b.add(C,"m");if(h.AllowAllDay!=="Y"&&h.AllowAllDay!=="T"&&h.AllowAllDay!=="1"||h.AllowAllDay==="string")N=!1}if(v.length===0||!v[1]){if(h.DisplayField.length===0)continue;v[1]=0}e.push({id:h.Id,title:"",start:h.Planned,end:b,multiDisplay:E,displayFieldOne:h.DisplayField[v[1]].FieldValue,dataDrilldown:h.DisplayField[v[1]].DrillDown,url:"javascript:void(0)",repeating:h.Repeating,calendarId:h.CalendarId,readOnly:h.ReadOnly,icons:p,iconText:d,className:"fc-event-skin calendar-EventStyle-"+T,allDay:N,origAllDay:N,editable:t.Get("CanUpdate"),isZeroDuration:y})}}i.fullCalendar("removeEvents"),i.fullCalendar("addEventSource",e),t.Get("DelayRenderUpdate")&&(t.AddProperty("DelayRenderUpdate",!1),i.fullCalendar("refetchEvents"));if(t.Get("Enable BusyFreeTime")==="Y"){var k=t.ExecuteMethod("CalcBusyHrsAndAllDay",e);t.AddProperty("BusyHours",k[0]),t.AddProperty("AllDays",k[1]),this.GetCalCtrlBuilder().RenderBusyFreeTime()}if(t.Get("EventClickInProgress")){t.SetProperty("EventClickInProgress",!1);var L=t.Get("SelectedEvent").id,A=i.find(".fc-event-container > [data-drilldown*='"+L+"']");A.length===1&&A.trigger("click")}t.AddProperty("CSSLegendsLDC",n),t.AddProperty("CSSLegendsLIC",r),this.GetCalCtrlBuilder().AddColorCodedLegends(i.find(".siebui-cal-hdr-wrapper"));var O=i.find(".siebui-cal-btn-today").children("span");s.AttachAutoAttributes($(O).children(".fc-button-content"),"Button","today"),O=i.find(".siebui-cal-btn-prev").children("span"),s.AttachAutoAttributes($(O).children(".fc-button-content"),"Button","prev"),s.AttachAutoAttributes($(O),"Button","prev"),O=i.find(".siebui-cal-btn-next").children("span"),s.AttachAutoAttributes($(O).children(".fc-button-content"),"Button","next"),s.AttachAutoAttributes($(O),"Button","next")},e}(),SiebelAppFacade.CalCtrlEventHandlers=function(){function e(e,t,n,r){var i=e,s=t,o=n,u=r;this.GetPM=function(){return i},this.GetCal=function(){return s},this.GetCalCtrlBuilder=function(){return o},this.GetUtilityMap=function(){return u}}return e.prototype={OnCancelClick:function(e){$("#"+e).dialog("close")},OnDatepickerSelect:function(e){var t=this.GetCal(),n=this.GetPM(),r=$("#"+e).datepicker("getDate");n.AddProperty("SelectedDate",r),t.fullCalendar("gotoDate",r),t.find(".fc-toolbar").width()>$("#s_"+n.Get("GetFullId")+"_div").width()&&$("#s_"+n.Get("GetFullId")+"_div").width(t.find(".fc-toolbar").width()),t.fullCalendar("getView").name!=="month"&&this.GetCalCtrlBuilder().AddMouseControls()},OnHomePageViewBtnClick:function(e){var t=this.GetPM(),n=CCFMiscUtil_CreatePropSet();SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0});var r={async:!0,cb:function(){SiebelApp.S_App.uiStatus.Free()}};n.SetProperty("SelectedDay",this.GetCal().fullCalendar("getDate").format("MM/DD/YYYY"));switch(e){case"month":t.ExecuteMethod("InvokeMethod","GoToMonthly",n,r);break;case"agendaWeek":t.ExecuteMethod("InvokeMethod","GotoWeekly",n,r);break;case"agendaDay":t.ExecuteMethod("InvokeMethod","GotoToday",n,r);break;default:}},OnQuickAddDialogOkClick:function(e,t,n){var r=this.GetPM(),i=$("input:text[name=eventDescription]").val();$.trim(i)===""?i="":r.SetProperty("QuickAdd",!0),r.OnControlEvent("newEvent",i,t,n,null),$("#"+e).dialog("close")},OnRepeatDialogOkClick:function(e,t,n,r,i){var s=CCFMiscUtil_CreatePropSet(),o=$("input:radio[name=userchoice]:checked").val();o!=="SaveThisOne"&&o!=="SaveAll"?(r(),$("#"+e).dialog("close")):(s.SetProperty("Repeating","Y"),o==="SaveThisOne"?s.SetProperty("Modify","ThisOne"):s.SetProperty("Modify","AllFuture"),this.GetPM().OnControlEvent(n,t.start.format("MM/DD/YYYY HH:mm:ss"),t.end.format("MM/DD/YYYY HH:mm:ss"),t.calendarId,s),i(),$("#"+e).dialog("close"))},OnSettingsDialogOkClick:function(e){var t=this.GetPM(),n=!1,r={async:!0,cb:function(){SiebelApp.S_App.uiStatus.Free()}};t.Get("Enable Timezone Picker")==="Y"&&t.Get("Timezone")!==$("#tzCombo").val()&&(t.AddProperty("Timezone",$("#tzCombo").val()),n=!0);var i=$("#ownerCombo").val();t.Get("Enable Owner Picker")==="Y"&&t.Get("Owner")!==i&&(i==="ALLEMPLOYEES"?(SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),t.ExecuteMethod("InvokeMethod","GoToEmployeeCalView",CCFMiscUtil_CreatePropSet(),r)):(t.AddProperty("Owner",i),t.ExecuteMethod("UpdateUserPermission"),i===t.Get("User Login Name")&&t.Get("FromExternalCalendar")==="Y"&&(SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),t.ExecuteMethod("InvokeMethod","GoToExternalCalView",t.ExecuteMethod("PopulatePropSet"),r))),n=!0),n&&i!=="ALLEMPLOYEES"&&(t.AddProperty("DelayRenderUpdate",!0),t.ExecuteMethod("GetCalendarData")),$("#"+e).dialog("close")},OnViewBtnClick:function(e){var t=this.GetCal(),n=this.GetPM(),r=this.GetUtilityMap(),i=r.SplitViewName(t.fullCalendar("getView").name),s,o=SiebelApp.S_App.IsRwd()?$("#"+SiebelApp.S_App.ViewTarget()):$("#_sweview");t.find(".siebui-cal-btn-"+i).removeClass("disabled"),t.find(".siebui-cal-btn-"+i+"-txt").removeClass("disabled"),n.AddProperty("ViewMode",r.ViewNameToMode(e)),t.fullCalendar("removeEvents"),e==="agendaDay"?($(o).find(".siebui-applet").each(function(){$(this).find(".fc-view-container").length===0&&$(this).removeClass("hide")}),$("#_FormParentRelatedItemsOuterCont").removeClass("hide"),$("#"+n.Get("GetFullId")).width(0),$("#"+n.Get("GetFullId")).width("auto"),$("#s_"+
n.Get("GetFullId")+"_div").width(0),$("#s_"+n.Get("GetFullId")+"_div").width("auto"),s=Math.max(t.find(".fc-toolbar").width(),$("#s_"+n.Get("GetFullId")+"_div").width(),t.find(".siebui-short-hdr").width()),s!==$("#s_"+n.Get("GetFullId")+"_div").width()&&$("#s_"+n.Get("GetFullId")+"_div").width(s),n.SetProperty("ForceWindowResize",!0)):e!=="agendaDay"&&window.matchMedia("(max-width: 1199px)").matches&&!$("#"+n.Get("GetFullId")).parent().hasClass("siebui-sub-applets")&&($(o).find(".siebui-applet").each(function(){$(this).find(".fc-view-container").length===0&&$(this).addClass("hide")}),$("#_FormParentRelatedItemsOuterCont").addClass("hide"),$("#"+n.Get("GetFullId")).width(0),s=Math.max($("#_sweview").width(),t.find(".fc-toolbar").width()),$("#"+n.Get("GetFullId")).width(s),$("#s_"+n.Get("GetFullId")+"_div").width(0),$("#s_"+n.Get("GetFullId")+"_div").width("auto"),s===t.find(".fc-toolbar").width()&&$("#s_"+n.Get("GetFullId")+"_div").width(s)),t.fullCalendar("changeView",e),$(document).unbind("mouseup.JQFullCalRenderer"),e!=="month"&&this.GetCalCtrlBuilder().AddMouseControls()},OnNavBtnClick:function(e){var t=this.GetPM(),n=this.GetCal(),r=n.fullCalendar("getView"),i=moment.duration();e==="next"?r.name==="agendaWeek"?i=moment.duration(1,"weeks"):r.name==="agendaDay"?i=moment.duration(1,"days"):i=moment.duration(1,"months"):e==="prev"&&(r.name==="agendaWeek"?i=moment.duration(-1,"weeks"):r.name==="agendaDay"?i=moment.duration(-1,"days"):i=moment.duration(-1,"months"));var s=$.fullCalendar.moment(moment().format("YYYY-MM-DD"));(s.isBefore(r.start)||!s.isBefore(r.end)||e!=="today")&&n.fullCalendar("removeEvents"),(e==="prev"||e==="next")&&n.fullCalendar("incrementDate",i);var o=n.fullCalendar("getDate"),u=o.toDate();if(e==="today"){var a=$.fullCalendar.moment(moment().format());u=a.toDate(),n.fullCalendar("gotoDate",u)}$("#"+t.Get("GetFullId")).find("#caldate_picker").datepicker("setDate",u),n.find(".fc-toolbar").width()>$("#s_"+t.Get("GetFullId")+"_div").width()&&$("#s_"+t.Get("GetFullId")+"_div").width(n.find(".fc-toolbar").width()),r.name!=="month"&&this.GetCalCtrlBuilder().AddMouseControls()},OnRefreshCalendar:function(){var e=this.GetCal();e.fullCalendar("refetchEvents")},OnPrintCalendar:function(){var e=this.GetPM(),t=this.GetCal(),n=$("#s_"+e.Get("GetFullId")+"_div"),r=t.find(".fc-scroller"),i=$("#_sweview"),s=$(".siebui-applet"),o=$("div[class^=siebui-span-]"),u=$(".siebui-view-multi-column"),a=0,f=0,l=0,c=e.Get("ViewMode"),h=e.ExecuteMethod("GetSlotInfo"),p=t.fullCalendar("option","contentHeight");c==="2"?f=t.find(".fc-toolbar").height()+t.find(".fc-day-grid").height()+t.find(".fc-month-view .fc-row").height():(a=Math.max(t.find(".fc-slats tr").height(),21),f=a*(h.totalSlots+1)+t.find(".fc-toolbar").height()+t.find(".fc-day-grid").height()+t.find(".fc-agenda-view .fc-row").height(),l=r.scrollTop()),s.each(function(){$(this).find(".fc-view-container").length===0&&$(this).addClass("hide")}),$("#_FormParentRelatedItemsOuterCont").addClass("hide"),o.each(function(){$(this).addClass("siebui-print-static")}),u.addClass("siebui-print-dbl-width"),n.addClass("siebui-cal-print"),t.fullCalendar("refetchEvents"),t.fullCalendar("option","contentHeight",f),u.addClass("siebui-noscroll"),i.addClass("siebui-noscroll"),r.addClass("siebui-noscroll");var d=window.navigator.pointerEnabled||window.PointerEvent?"TRUE":window.navigator.msPointerEnabled?"TRUE":"";if(!d)window.print();else{var v=c==="2"?"span":"div";n.find(v+".fc-title").each(function(){$(this).data("originalText",$(this).text());var e=$(this).text();$(this).text(e),$(this).find("a").addClass("siebui-no-display")}),window.print(),n.find(v+".fc-title").each(function(){var e=$(this).data("originalText");$(this).text(e),$(this).find("a").removeClass("siebui-no-display")})}s.each(function(){$(this).find(".fc-view-container").length===0&&$(this).removeClass("hide")}),$("#_FormParentRelatedItemsOuterCont").removeClass("hide"),o.each(function(){$(this).removeClass("siebui-print-static")}),u.removeClass("siebui-print-dbl-width"),u.removeClass("siebui-noscroll"),i.removeClass("siebui-noscroll"),r.removeClass("siebui-noscroll"),n.removeClass("siebui-cal-print"),t.fullCalendar("render"),t.fullCalendar("option","contentHeight",p),(c==="0"||c==="1")&&r.scrollTop(l),this.GetCalCtrlBuilder().BldSlotIndicators(t.fullCalendar("getView"))},OnWeekHdrAddClick:function(e){var t=this.GetPM(),n=moment($(e.target).attr("data-date")),r,i=moment(),s=i.minute(),o=parseInt(t.Get("Preferred Timeslot Interval"),10),u=parseInt(t.Get("Preferred Duration"),10);t.AddProperty("SelectedDate",n.toDate()),n.hours(i.hour()+Math.floor((s+o)/60)),n.minutes((Math.floor(s/o)+1)*o%60),n.seconds(0),r=moment(n),r.add(u,"m"),t.OnControlEvent("newEvent","",n,r,null)},OnWeekHdrClick:function(e){var t=this.GetPM(),n;$(e.target).attr("data-date")?n=moment($(e.target).attr("data-date")):n=moment($(e.target.parentElement).attr("data-date")),t.AddProperty("SelectedDate",n.toDate())}},e}(),SiebelAppFacade.CalCtrlBuilder=function(){function e(e,t,n){var r=t,i=e,s=n,o=new SiebelAppFacade.CalCtrlEventHandlers(e,t,this,n);this.GetCal=function(){return r},this.GetPM=function(){return i},this.GetCalCtrlEventHandlers=function(){return o},this.GetUtilityMap=function(){return s}}function t(e,t,n,r,i,s){var o=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({attrs:"ot='"+i+"' un='"+t.replace(/\s/g,"")+"' rn='"+t.replace(/\s/g,"")+"' alt= '"+t.replace(/\d/g,"")+"' title='"+t.replace(/\d/g,"")+"'",className:n,id:r,type:i,value:e})),u=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");return u&&u.Manage(o,["click","tap"],function(){o.hasClass("fc-state-disabled")||s.apply(this,Array.prototype.slice.call(arguments,0))}).Manage(o,"mousedown",function(){o.not(".fc-state-active").not(".fc-state-disabled").addClass("fc-state-down")}).Manage(o,"mouseup",function(){o.removeClass("fc-state-down")}).Manage(o,"mouseenter",function(){o.not(".fc-state-active").not(".fc-state-disabled").addClass("fc-state-hover")}
).Manage(o,"mouseleave",function(){o.removeClass("fc-state-hover").removeClass("fc-state-down")}),o}function n(e,t,n){var r=this.GetPM(),i=this.GetUtilityMap(),s=this.GetCal().find("#"+e);s.hide();var o=r.Get("ShortMonthNames"),u=r.Get("ShortDayNames"),a=r.Get("UISTR Choose a date")||"Choose a date";s.datepicker({buttonImage:t,buttonText:a,buttonImageOnly:!1,changeMonth:!0,changeYear:!0,dayNamesMin:u,isRTL:r.Get("RTL Mode")==="Y",monthNames:r.Get("MonthStringArray"),monthNamesShort:o,onSelect:n,firstDay:r.Get("Week Day Number"),showOn:"button"});var f=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");return f.Manage(s,"keydown",function(){s.focus()}),$(".ui-datepicker-trigger").addClass("fc-button-inner"),$(".ui-datepicker-trigger").attr("alt",a),$(".ui-datepicker-trigger").attr("title",a),$(".ui-datepicker-trigger").attr("tabindex",0),$(".ui-datepicker-trigger").children().addClass("fc-button-content"),$(".ui-datepicker-trigger").children().addClass("cal-ui-datepicker"),$(".ui-datepicker-trigger").addClass("btn-icon"),$(".ui-datepicker-trigger").addClass("siebui-icon-calendar"),$(".hasDatepicker").attr("tabindex",-1),i.AttachAutoAttributes(this.GetCal().find("#"+e+" ~ button.ui-datepicker-trigger"),"datePicker","datePicker"),r.Get("Default Selected Day")?s.datepicker("setDate",r.Get("Default Selected Day")):r.Get("SelectedDate")&&s.datepicker("setDate",r.Get("SelectedDate")),s}function r(e,t,n,r){var i=$("#"+e),s=[];for(var o in r){var u={"class":"siebui-ctrl-btn appletButton",click:r[o],text:o};s.push(u)}return $("#"+e).length===0&&(i=$('<div id="'+e+'"></div>').html(t).dialog({autoOpen:!1,buttons:s,close:function(){$("#"+e).remove()},height:"auto",modal:!0,resizable:!1,title:n,width:"auto",draggable:!1})),i.parent().addClass("siebui-cal-popup"),i}function i(e){var t=this.GetPM(),n="",r;switch(e){case"QuickAddDialog":var i=t.Get("UISTR Tooltip Field Label:Description")||"Description",s=t.Get("DescriptionFieldLength");r="aria-labelledby='s_DescriptionId' rn='QANewDescription' ot='input' un='QANewDescription' name='eventDescription' maxlength='"+s+"'",n='<p><span id="s_DescriptionId">'+i+"</span><br />",n+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_TEXT"),id:"DescriptionId",attrs:r}),n+="<br /></p>";break;case"RepeatDialog":var o=t.Get("UISTR Repeating Dialog Label 1"),u=t.Get("UISTR Repeating Dialog Label 2"),a=t.Get("UISTR Repeating Dialog This Instance")||"This instance",f=t.Get("UISTR Repeating Dialog All Future Instances")||"This and all future instances";r="aria-labelledby='s_SaveThisOneId' rn='saveThisOne' ot='radioButton' un='saveThisOne' name='userchoice' checked='checked'",n="<p>"+o+"<br /><br />",n+=u+"<br />",n+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_RADIO"),id:"SaveThisOneId",attrs:r,value:"SaveThisOne"}),r="aria-labelledby='s_SaveAllId' rn='saveAll' ot='radioButton' un='saveAll' name='userchoice'",n+='<span id="s_SaveThisOneId">'+a+"</span><br />",n+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_RADIO"),id:"SaveAllId",attrs:r,value:"SaveAll"}),n+='<span id="s_SaveAllId">'+f+"</span><br /></p>";break;case"SettingsDialog":var l=CCFMiscUtil_CreatePropSet();n="<table><td></td>";if(t.Get("Enable Timezone Picker")==="Y"){l.DecodeFromString(t.Get("Timezone List"));var c=[],h=l.GetChildCount();for(var p=0;p<h;p++)c.push(l.GetChild(p).GetProperty("Value"));var d=t.Get("UISTR Timezone Label");r="aria-labelledby='Timezone_Label' aria-label='"+d+"'rn='settingTimeZone' ot='JComboBox' un='settingTimeZone'";var v=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_COMBOBOX"),id:"tzCombo",attrs:r,value:c});n+='<tr><td><span id="Timezone_Label">'+d+"</span></td>",n+="<td>"+v+"</td></tr>"}if(t.Get("Enable Owner Picker")==="Y"){l.DecodeFromString(t.Get("Access List"));var m=l.EnumProperties(!0),g=[],y=[],b=[];while(m)g.push([m,l.GetProperty(m)]),m=l.EnumProperties(!1);g.sort(this.GetUtilityMap().SortOrder);for(var w=0;w<g.length;w++)b.push(g[w][0]),y.push(g[w][1]);var E=t.Get("UISTR Owner Label");r="aria-labelledby='Owner_Label' aria-label='"+E+"'rn='settingOwner' ot='JComboBox' un='settingOwner'";var S=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({attrs:r,displayValue:y,id:"ownerCombo",type:consts.get("SWE_CTRL_COMBOBOX"),value:b});n+='<tr><td><span id="Owner_Label">'+E+"</span></td>",n+="<td>"+S+"</td></tr>"}n+="</table>"}return n}return e.prototype.AddColorCodedLegends=function(e){var t=this.GetPM(),n=this.GetCal(),r=t.Get("CSSLegendsLDC")||[],i=t.Get("CSSLegendsLIC")||[];n.find("#siebui-cal-legend-row")&&n.find("#siebui-cal-legend-row").remove();var s=$("<div id='siebui-cal-legend-row' class='siebui-cal-legend-row'></div>");s.appendTo(e),r.sort();for(var o=0;o<r.length;o++){var u=r[o]!==""?i[r[o]]:"undefined",a=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_PLAINTEXT"),className:"siebui-legend-square",id:"color_square_"+u,attrs:"title=''",value:"&#9632"}),f=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_PLAINTEXT"),className:"siebui-legend-text",id:"legend_"+u,value:r[o]!==""?r[o]:"undefined"}),l=$(a+f);n.find("#siebui-cal-legend-row").append(l);var c=$(".calendar-EventStyle-"+u).css("background-color");c||(n.find("#color_square_"+u).remove(),n.find("#legend_"+u).remove())}},e.prototype.AddControls=function(){var e=this.GetPM(),t=this.GetCal(),r=this,i=this.GetCalCtrlEventHandlers(),s=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper"),o=e.Get("Home Page Mode"),u=this.GetUtilityMap(),a="",f=$(".fc-center").width(),l=[],c=[],h=[],p=[],d,v,m;if(e.Get("CanInsert")){if(e.Get("Enable New Contact Call Button")==="Y"){var g=e.Get("UISTR Contact Call")||"Contact Call";l.push(this.BldCustomHdrBtn(e.Get("UISTR Contact Call Button"),g,"newContactCall","",function(){e.OnControlEvent("newLSCall","Contact")}))}if(e.Get("Enable New Account Call Button")==="Y"){var y=e.Get("UISTR Account Call")||"Account Call"
;l.push(this.BldCustomHdrBtn(e.Get("UISTR Account Call Button"),y,"newAccountCall","",function(){e.OnControlEvent("newLSCall","Account")}))}if(e.Get("Enable New Meeting Button")==="Y"){var b=e.Get("UISTR Meeting")||"Meeting";l.push(this.BldCustomHdrBtn(e.Get("UISTR New Meeting Button"),b,"newMeetingCall","",function(){e.OnControlEvent("newLSCall","Meeting")}))}if(e.Get("Enable New Button")==="Y"){var w=e.Get("UISTR New Record")||"New Record",E=function(){var n,i,s=t.fullCalendar("getView"),o=s.name;n=r.GetCal().fullCalendar("getDate"),o==="agendaWeek"&&e.Get("Preferred Weekly Mode")!=="7 Day Weekly"&&$.inArray(n.day()%7,e.Get("Hidden Days"))!==-1&&(n=s.start);var u=moment(),a=u.minute(),f=parseInt(e.Get("Preferred Timeslot Interval"),10),l=parseInt(e.Get("Preferred Duration"),10);n.hours(u.hour()+Math.floor((a+f)/60)),n.minutes((Math.floor(a/f)+1)*f%60),n.seconds(0),i=moment(n),i.add(l,"m"),e.OnControlEvent("newEvent","",n,i,null)};a="cal_leftHdr_newEvent_button",c.push(this.BldStdHdrBtn("",w,"newEvent","siebui-icon-add",a,E)),a="cal_shortHdr_newEvent_button",p.push(this.BldStdHdrBtn("",w,"newEvent","siebui-icon-add",a,E))}}if(e.Get("Enable Refresh Button")==="Y"){var S=e.Get("UISTR Refresh")||"Refresh";c.push(this.BldStdHdrBtn("",S,"refreshCalendar","siebui-icon-in-progress","",function(){i.OnRefreshCalendar()}))}if(e.Get("Enable Print Button")==="Y"){var x=e.Get("UISTR Print")||"Print";c.push(this.BldStdHdrBtn("",x,"printCalendar","siebui-icon-print","",function(){i.OnPrintCalendar()}))}if(e.Get("Enable Daily")==="Y"){var T=e.Get("UISTR Switch to daily view")||"Switch to daily view",N;o?N=function(){i.OnHomePageViewBtnClick("agendaDay")}:N=function(){i.OnViewBtnClick("agendaDay")},a="cal_rightHdr_agendaDay_button",h.push(this.BldStdHdrBtn("",T,u.SplitViewName("agendaDay"),"siebui-icon-cal-daily",a,N)),a="cal_rightHdr_agendaDay_txt_button",h.push(this.BldStdHdrBtn(e.Get("UISTR Daily Tab"),T,u.SplitViewName("agendaDay")+"-txt","",a,N)),a="cal_shortHdr_agendaDay_txt_button",p.push(this.BldStdHdrBtn(e.Get("UISTR Daily Tab"),T,u.SplitViewName("agendaDay")+"-txt","",a,N))}if(e.Get("Enable Weekly")==="Y"){var C=e.Get("UISTR Switch to week view")||"Switch to week view",k;o?k=function(){i.OnHomePageViewBtnClick("agendaWeek")}:k=function(){i.OnViewBtnClick("agendaWeek")},a="cal_rightHdr_agendaWeek_button",h.push(this.BldStdHdrBtn("",C,u.SplitViewName("agendaWeek"),"siebui-icon-cal-weekly",a,k)),a="cal_rightHdr_agendaWeek_txt_button",h.push(this.BldStdHdrBtn(e.Get("UISTR Weekly Tab"),C,u.SplitViewName("agendaWeek")+"-txt","",a,k)),a="cal_shortHdr_agendaWeek_txt_button",p.push(this.BldStdHdrBtn(e.Get("UISTR Weekly Tab"),C,u.SplitViewName("agendaWeek")+"-txt","",a,k))}if(e.Get("Enable Monthly")==="Y"){var L=e.Get("UISTR Switch to month view")||"Switch to month view",A;o?A=function(){i.OnHomePageViewBtnClick("month")}:A=function(){i.OnViewBtnClick("month")},a="cal_rightHdr_month_button",h.push(this.BldStdHdrBtn("",L,u.SplitViewName("month"),"siebui-icon-cal-monthly",a,A)),a="cal_rightHdr_month_txt_button",h.push(this.BldStdHdrBtn(e.Get("UISTR Monthly Tab"),L,u.SplitViewName("month")+"-txt","",a,A)),a="cal_shortHdr_month_txt_button",p.push(this.BldStdHdrBtn(e.Get("UISTR Monthly Tab"),L,u.SplitViewName("month")+"-txt","",a,A))}if((e.Get("Enable Timezone Picker")==="Y"||e.Get("Enable Owner Picker")==="Y")&&(!o||o!=="Y")){var O=e.Get("UISTR Advanced Calendar Settings")||"Advanced Calendar Settings";h.push(this.BldStdHdrBtn("",O,"settings","siebui-icon-settings","",function(){r.BuildSettingsDialog()}))}var M=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_PLAINTEXT"),className:"fc-header-space"}),_=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-cal-hdr-wrapper siebui-cal-"+u.SplitViewName(t.fullCalendar("getView").name)+"-hdr",id:"siebui-cal-hdr-wrapper-"+this.GetPM().Get("GetPlaceholder"),type:consts.get("SWE_CTRL_PLAINTEXT")})),D=$("<div class='siebui-short-hdr siebui-btn-group-justified' id='siebui-short-hdr-"+this.GetPM().Get("GetPlaceholder")+"'/>");t.prepend(D),t.prepend(_),t.find(".fc-toolbar").appendTo(_),_.find("h2").addClass("fc-header-title");var P=_.find(".fc-center"),H=_.find(".fc-right"),B=P.clone(!0,!0),j=H.clone(!0,!0);P.replaceWith(j),H.replaceWith(B);var F=$("<div class='siebui-hdr-right'></div>"),I=$("<div class='siebui-hdr-left'></div>");t.find(".fc-right").append(F),t.find(".fc-left").append(I),_.find(".fc-clear").remove();var q=$("<div id='siebui-cal-button-row-2'><div id='cal-custom-buttons'></div></div>");l.length===0?q.addClass("siebui-cal-custombutton-row-empty"):q.addClass("siebui-cal-custombutton-row"),_.append(q);var R=q.find("#cal-custom-buttons"),U=t.find(".siebui-hdr-left"),z=t.find(".siebui-hdr-right"),W="caldate_picker",X=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_TEXT"),id:W}),V=t.find(".fc-today-button"),J=e.Get("RTL Mode")!=="Y"?t.find(".fc-prev-button"):t.find(".fc-next-button"),K=e.Get("RTL Mode")!=="Y"?t.find(".fc-next-button"):t.find(".fc-prev-button"),Q={},G={};if(V.length>0){Q=V.parent(),G=V.prev(),t.find(".fc-today-button").remove();if(e.Get("Enable Today Button")==="Y"){var Y=e.Get("UISTR Go to Today")||"Go to Today";a="cal_today_button",V=this.BldStdHdrBtn(e.Get("UISTR Today Button"),Y,"today","",a,function(){i.OnNavBtnClick("today")}),G[0]?G.after(V):Q.prepend(V);var Z=t.fullCalendar("getView"),et=moment().format("YYYY-MM-DD"),tt=$.fullCalendar.moment(et);!tt.isBefore(Z.start)&&tt.isBefore(Z.end)?V.addClass("disabled"):V.removeClass("disabled");var nt=V.clone(!0,!0).attr("id","cal_shortHdr_today_button");p.push(nt)}}if(J.length>0){var rt=e.Get("RTL Mode")!=="Y"?e.Get("UISTR Previous Day")||"Previous Day":e.Get("UISTR Next Day")||"Next Day";Q=J.parent(),G=J.prev(),J=this.BldStdHdrBtn("",rt,"prev","siebui-icon-arrowsm-left","",function(){i.OnNavBtnClick(e.Get("RTL Mode")!=="Y"?"prev":"next")}),e.Get("RTL Mode")!=="Y"?t.find(".fc-prev-button").remove():t.find(".fc-next-button"
).remove(),G[0]?G.after(J):Q.prepend(J)}var it="",st=e.Get("UISTR Choose a date")||"Choose a date",ot="tabindex='0' aria-label='"+st+"'";e.Get("Enable Date Picker")==="Y"&&(it=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_PLAINTEXT"),className:"btn-icon siebui-icon-calendar siebui-cal-btn-datepicker",id:"cal-datepicker-button",value:X,attrs:ot}));for(d=0;d<c.length;d++)U.append(M),U.append(c[d]);for(v=0;v<h.length;v++)z.append(M),z.append(h[v]);for(m=0;m<l.length;m++)R.append(M),R.append(l[m]);e.Get("RTL Mode")!=="Y"?t.find(".fc-center").append(it):G.after(it);for(v=0;v<p.length;v++){var ut=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-short-hdr-elm",type:consts.get("SWE_CTRL_PLAINTEXT")}));ut.append(p[v]),D.append(ut)}var at=e.Get("UISTR Date Picker Icon")||"images/calPicker_icon.gif";if(e.Get("Enable Date Picker")==="Y"){n.call(this,W,at,function(){i.OnDatepickerSelect.call(i,W)});var ft=t.find("#"+W),lt=ft.datepicker("widget"),ct=t.find(".siebui-cal-btn-datepicker.siebui-icon-calendar");ct.removeClass("siebui-icon-calendar"),t.find("#cal-datepicker-button").find("img").remove(),s&&(s.Manage(ft,["change"],function(n){var r=SiebelApp.S_App.LocaleObject.GetStringFromDateTime($(this).val(),SiebelApp.S_App.LocaleObject.GetDateFormat(),"MM/DD/YYYY"),i=SiebelApp.S_App.LocaleObject.GetDispDateSeparator();while(i!=="/"&&r.indexOf(i)!==-1)r=r.replace(i,"/");r===""&&$(this).val()!==""||$(this).val()===""?(ct.focus(),SiebelApp.S_App.ErrorObject.SetErrorMsg("LocaleErrFormattedToString",$(this).val()),SiebelApp.S_App.ErrorObject.ProcessError()):(e.AddProperty("SelectedDate",r),t.fullCalendar("gotoDate",r),$(this).hide(),t.find(".fc-header-title").show(),ct.focus())}),s.Manage(t.find(".fc-header-title"),["click","tap"],function(){var e=t.fullCalendar("getDate").format("MM/DD/YYYY");$(this).hide(),ft.val(e).width($(this).width()).show().focus(),ft.addClass("siebui-cal-input")}),s.Manage(ft,["blur"],function(){t.find("#caldate_picker").hide(),t.find(".fc-header-title").show()}),s.Manage(ct,["click","tap"],function(){ft.datepicker("show"),lt.find(".ui-datepicker-calendar").attr("tabindex","0").focus()}),s.Manage(ct,"keydown",function(e){e.keyCode===$.ui.keyCode.ENTER&&(ft.datepicker("show"),lt.find(".ui-datepicker-calendar").attr("tabindex","0").focus())}),s.Manage(lt,"keydown",function(e){e.keyCode===$.ui.keyCode.TAB&&(ft.datepicker("hide"),ct.focus())}))}if(K.length>0){var ht=e.Get("RTL Mode")!=="Y"?e.Get("UISTR Next Day")||"Next Day":e.Get("UISTR Previous Day")||"Previous Day";Q=K.parent(),G=K.prev(),K=this.BldStdHdrBtn("",ht,"next","siebui-icon-arrowsm-right","",function(){i.OnNavBtnClick(e.Get("RTL Mode")!=="Y"?"next":"prev")}),e.Get("RTL Mode")!=="Y"?t.find(".fc-next-button").remove():t.find(".fc-prev-button").remove(),G[0]&&e.Get("RTL Mode")!=="Y"?Q.append(K):G[0]?G.after(K):Q.prepend(K)}},e.prototype.AddMouseControls=function(){var e=this.GetPM(),t=!1,n=!1,r=$("#"+e.Get("GetFullId")+" .fc-widget-content"),i,s,o=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");o&&(o.Manage(r,"mousedown",function(e){t=!0,n=!1,i=e.pageX,s=e.pageY}),o.Manage(r,"mousemove",function(e){t===!0&&(Math.abs(e.pageX-i)>5||Math.abs(e.pageY-s)>5)&&(n=!0)}),o.Manage($(document),"mouseup.JQFullCalRenderer",function(){t===!0&&(t=!1,e.AddProperty("MouseDrag",n))}))},e.prototype.BuildQuickAddDialog=function(e,t){var n=this.GetPM(),s=this.GetCalCtrlEventHandlers(),o=this.GetCal(),u=this.GetUtilityMap(),a=CCFMiscUtil_CreatePropSet();if(typeof n.Get("Enable Quick Add")=="undefined"||n.Get("Enable Quick Add").toLowerCase()!=="n"&&n.Get("Enable Quick Add").toLowerCase()!=="false"){var f=n.Get("UISTR Tooltip Field Label:Description")||"Description",l=n.Get("UISTR Repeating Dialog OK Button")||"OK",c=n.Get("UISTR Repeating Dialog Cancel Button")||"Cancel",h=n.Get("UISTR New Event")||"New Event",p=i.call(this,"QuickAddDialog"),d={};d[l]=function(){s.OnQuickAddDialogOkClick("quickAddDialog",e,t)},d[c]=function(){s.OnCancelClick("quickAddDialog")};var v=r.call(this,"quickAddDialog",p,h,d);$("#quickAddDialog").addClass("siebui-cal-quick-add-dialog"),v.dialog("option","open",function(e){var t=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");t&&t.Manage($("#quickAddDialog"),"keypress",function(e){e.keyCode===$.ui.keyCode.ENTER&&$(this).parent().find(".ui-dialog-buttonset button").eq(0).trigger("click")})}),u.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===l}),"Button","QuickAddOK"),u.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===c}),"Button","QuickAddCancel"),v.dialog("open")}},e.prototype.BuildRepeatDialog=function(e,t,n,s){var o=this.GetPM(),u=this.GetCalCtrlEventHandlers(),a=CCFMiscUtil_CreatePropSet(),f=this.GetUtilityMap(),l=i.call(this,"RepeatDialog"),c=o.Get("UISTR Repeating Dialog OK Button")||"OK",h=o.Get("UISTR Repeating Dialog Cancel Button")||"Cancel",p=o.Get("UISTR Repeating Event Dialog")||"Repeating Event Dialog",d={};d[c]=function(){u.OnRepeatDialogOkClick("repeatDialog",e,t,n,s)},d[h]=function(){n(),u.OnCancelClick("repeatDialog")};var v=r.call(this,"repeatDialog",l,p,d);$("#repeatDialog").addClass("siebui-cal-repeat-dialog"),v.dialog("option","close",function(e,t){e.originalEvent&&$(e.originalEvent.target).closest(".ui-dialog-titlebar-close").length!==0&&n(),$("#repeatDialog").remove()}),f.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===c}),"Button","RepeatOK"),f.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===h}),"Button","RepeatCancel"),v.dialog("open")},e.prototype.BuildSettingsDialog=function(){var e=this.GetPM(),t=this.GetCalCtrlEventHandlers(),n=this.GetUtilityMap(),s=e.Get("UISTR Repeating Dialog OK Button")||"OK",o=e.Get("UISTR Repeating Dialog Cancel Button")||"Cancel",u=e.Get("UISTR Settings")||"Settings",a=i.call(this
,"SettingsDialog"),f={};f[s]=function(){t.OnSettingsDialogOkClick("calSettingsDialog")},f[o]=function(){t.OnCancelClick("calSettingsDialog")};var l=r.call(this,"calSettingsDialog",a,u,f);$("#calSettingsDialog").addClass("siebui-cal-settings-dialog"),n.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===s}),"Button","SettingsOK"),n.AttachAutoAttributes($(".ui-dialog-buttonpane").find("button").filter(function(){return $(this).text()===o}),"Button","SettingsCancel"),l.dialog("open");var c=e.Get("Timezone");if(e.Get("Enable Timezone Picker")==="Y"){if(typeof c=="undefined"){var h=e.Get("Default Timezone")||"(GMT-08:00) Pacific Time (US & Canada)";e.AddProperty("Timezone",h),c=h}$("#tzCombo").val(c)}var p=e.Get("Owner");e.Get("Enable Owner Picker")==="Y"&&$("#ownerCombo").val(p)},e.prototype.BldStdHdrBtn=function(e,n,r,i,s,o){var u=SiebelApp.Utils.IsEmpty(s)?"cal_"+r+"_button":s,a="btn-icon siebui-cal-btn-"+r+" "+i;return t(e,n,a,u,consts.get("SWE_PST_BUTTON_CTRL"),o)},e.prototype.BldCustomHdrBtn=function(e,n,r,i,s){var o="siebui-ctrl-btn siebui-cal-btn-"+r+" "+i;return t(e,n,o,"cal-"+r+"-button",consts.get("SWE_CTRL_PLAINTEXT"),s)},e.prototype.BldSlotIndicators=function(e){var t=this.GetPM(),n=this.GetCal(),r=t.Get("RTL Mode")==="Y",i=t.Get("Hidden Days"),s=e.name==="agendaDay"?1:7,o=e.name==="agendaDay"?1:t.Get("Preferred Weekly Mode")==="7 Day Weekly"?7:7-i.length,u,a=this.GetUtilityMap(),f=moment(),l,c,h,p,d=t.ExecuteMethod("GetSlotInfo"),v,m,g,y,b,w="calendar-WorkingHr-"+e.name,E="calendar-NonWorkingHr-"+e.name,S=r?o-1:0;if(e.name==="month")return;n.find(".siebui-cal-start-row").removeClass("siebui-cal-start-row"),n.find(".siebui-cal-end-row").removeClass("siebui-cal-end-row"),n.find("."+w).removeClass(w),n.find("."+E).removeClass(E);for(var x=0;x<s;x++){var T=moment(e.start.format("YYYY-MM-DD"));T.add(x,"d"),l=T.isBefore(f,"d"),c=T.isAfter(f,"d"),h=!l&&!c,p=$.inArray((e.start.day()+x)%7,i)===-1;if(e.name==="agendaWeek"&&t.Get("Preferred Weekly Mode")!=="7 Day Weekly"&&!p)continue;v=h?Math.floor((f.hour()+f.minute()/60)*d.slotsPerHr):d.startWorkHrSlot;for(var N=0;N<d.totalSlots;N++){var C=moment.duration(N*parseInt(t.Get("Preferred Timeslot Interval"),10),"m"),k=moment({hour:C.hours(),minute:C.minutes()}).format("HH:mm");if(e.name==="agendaDay")y=n.find(".fc-slats tr").eq(N),m=y.find(".fc-widget-content"),g=y.find(".fc-axis"),b=g.parent(),a.AttachAutoAttributes(m,"CalendarSlot","slotCol-0-"+k);else if(e.name==="agendaWeek"){y=n.find(".fc-agendaWeek-view").find(".fc-slats tr").eq(N);if((!r&&S===0||r&&S===o-1)&&y.find("td").not(".fc-axis").length===1){var L=y.find("td").not(".fc-axis").eq(0);a.AttachAutoAttributes(L,"CalendarSlot","slotCol-1-"+k);for(var A=1;A<o;A++){r?L.clone(!0).last().prependTo(y):L.clone(!0).last().appendTo(y);var O=(A+1)%o;a.AttachAutoAttributes(L,"CalendarSlot","slotCol-"+O+"-"+k)}}var M=r?S:S+1;b=y.find("td").eq(M),b.children().length===0&&b.append($("<div style='position:relative'>&nbsp;</div>")),m=b.find("div")}N===v&&!l&&p&&b.addClass("siebui-cal-start-row");if(N>=v&&N<d.endWorkHrSlot&&!l&&p)e.name!=="month"&&m.addClass(w);else if(N<v||N>=d.endWorkHrSlot||l||!p)!l&&p&&N===d.endWorkHrSlot&&b.addClass("siebui-cal-end-row"),e.name==="agendaDay"&&g.addClass(E),e.name!=="month"&&m.addClass(E)}r?S--:S++}},e.prototype.BldWeekColHdr=function(e){var t=this.GetPM(),n=this.GetCal(),r=this.GetCalCtrlEventHandlers(),i=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper"),s=t.Get("Hidden Days"),o=t.Get("Preferred Weekly Mode")==="7 Day Weekly"?7:7-s.length,u=t.Get("RTL Mode")==="Y",a,f,l,c,h=0,p=!1;if(e.name!=="agendaWeek")return;var d=function(e){r.OnWeekHdrAddClick(e)},v=function(e){r.OnWeekHdrClick(e)};for(var m=0;m<o;m++){a=n.find("th.fc-widget-header").not(".fc-axis").eq(m);if(!a.hasClass("siebui-cal-col-hdr")&&a.text()!=="undefined"){f=a.text(),p=f.indexOf(SiebelApp.S_App.LocaleObject.GetDispDateSeparator())!==-1,l=f.split("%"),$(a).addClass("siebui-cal-col-hdr"),$(a).text("");while(t.Get("Preferred Weekly Mode")!=="7 Day Weekly"&&$.inArray((e.start.day()+h)%7,s)!==-1)h++;u?(c=moment(e.end),c.subtract(h+1,"d")):(c=moment(e.start),c.add(h,"d"));var g=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({attrs:"data-date= '"+c.format("YYYY-MM-DD")+"'",className:"siebui-col-hdr-date",type:consts.get("SWE_CTRL_PLAINTEXT")}));i&&i.Manage(g,["click","tap"],v);var y=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-col-hdr-row",type:consts.get("SWE_CTRL_PLAINTEXT"),value:l[0]})),b=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-col-hdr-row",type:consts.get("SWE_CTRL_PLAINTEXT"),value:l[1]+(p?"":" ")+l[2]}));g.append(y),g.append(b);var w=t.Get("UISTR New Record")||"New Record",E="cal_wkcolumn"+m+"newEvent_button",S=this.BldStdHdrBtn("",w,"newEvent","siebui-icon-add",E,d);S.attr("data-date",c.format("YYYY-MM-DD")),S.attr("rn",w.replace(/\s/g,"")+m),S.attr("un",w),S.attr("ot","Button");var x=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-date-hdr",type:consts.get("SWE_CTRL_PLAINTEXT")}));c.isSame(new Date,"day")&&(x.addClass("fc-today"),x.addClass("fc-state-highlight"));var T=$(SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-hdr-add-container",type:consts.get("SWE_CTRL_PLAINTEXT")}));T.append(S),x.append(g),t.Get("CanInsert")&&t.Get("Enable New Button")==="Y"&&x.append(T),$(a).append(x),n.find(".fc-agendaWeek-view").children("div").css("top",$(a).css("height"))}h++}},e.prototype.RenderBusyFreeTime=function(){var e=this.GetPM(),t=this.GetCal(),n=t.fullCalendar("getView");if(n.name!=="month")return;var r=e.ExecuteMethod("HourDecimal",e.Get("Preferred Business Day Start Time")),i=e.ExecuteMethod("HourDecimal",e.Get("Preferred Business Day End Time")),s=e.Get("Hidden Days");for(var o=0;o<7;o++)if($.inArray(o,s)!==-1){var u;o===0?u="sun":o===1?u="mon":o===2?u="tue":o===3?u="wed":o===4?u="thu":o===5?u="fri":o===6&&(u="sat"),typeof u!="undefined"&&
t.find(".fc-day.fc-"+u).addClass("siebui-off-day")}t.find(".siebui-free-time").remove();var a=moment(n.start),f;while(a.isBefore(n.intervalEnd)){if(a.isBefore(n.intervalStart)||!a.isBefore(n.intervalEnd)||a.isBefore(moment())){a.isBefore(moment())&&(f=a.format("YYYY-MM-DD"),t.find(".fc-day[data-date='"+f+"']").addClass("siebui-past-day")),a.add(1,"d");continue}if(t.fullCalendar("getDate").month()===a.month()){var l=e.Get("BusyHours"),c=$.inArray(a.day(),s)!==-1||typeof e.Get("AllDays")[a.toDate().toDateString()]!="undefined"?0:i-r,h=typeof l[a.toDate().toDateString()]=="undefined"?i-r:Math.round(c-l[a.toDate().toDateString()]/36e5),p=h===1?"HOUR AVAILABLE":"HOURS AVAILABLE";f=a.format("YYYY-MM-DD");var d=t.find(".fc-day[data-date='"+f+"']").not(".siebui-off-month, .siebui-off-day");d.find("div").removeAttr("style"),d.removeClass("fc-state-highlight");var v;if(h>0&&d.length>0&&c>0){var m=$("<div id='free-time-"+f+"' class='siebui-free-time'></div>");m.append("<h4>"+h+"</h4>"),m.append("<p>"+p+"</p>"),v=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-cal-monthly-cell",type:consts.get("SWE_CTRL_PLAINTEXT"),value:d.html()+$("<div>").append(m).html()}),d.html(v)}else{var g=e.Get("AllDays");d.find("p").remove();if(typeof g[a.toDate().toDateString()]!="undefined"){var y=$("<p id='all-day-"+f+"'>"+g[a.toDate().toDateString()].displayFieldOne+"</p>");d.addClass("siebui-cal-all-day"),v=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-cal-monthly-cell",type:consts.get("SWE_CTRL_PLAINTEXT"),value:d.html()+$("<div>").append(y).html()}),d.html(v)}}a.add(1,"d")}}},e}(),SiebelAppFacade.CalEventHandlers=function(){function e(e,t,n,r){var i=t,s=e,o=n,u=r;this.GetCal=function(){return i},this.GetPM=function(){return s},this.GetCalCtrlBuilder=function(){return o},this.GetUtilityMap=function(){return u}}return e.prototype={OnCalSelect:function(e,t){var n=this.GetPM();if(n.Get("CanInsert")&&this.GetCal().fullCalendar("getView").name!=="month"){var r={Planned:e,PlannedCompletion:t,AllDayFlag:"N"},i=this.GetUtilityMap().IsAllDayEvent(r),s=n.Get("MouseDrag"),o;if(s===!1&&!i){var u=parseInt(n.Get("Preferred Duration"),10);o=moment(e),o.add(u,"m")}else o=moment(t);this.GetCalCtrlBuilder().BuildQuickAddDialog(e,o)}},OnDayClick:function(e,t,n){this.GetCal().fullCalendar("gotoDate",e),this.GetPM().AddProperty("SelectedDate",this.GetCal().fullCalendar("getDate").toDate())},OnEventRender:function(e,t,n){var r=this.GetPM(),i=this.GetCal(),s=r.Get("CSSFontColors")||[],o="",u="",a;if(typeof e.className!="undefined"&&e.className.length===1&&e.className[0]==="fc-helper"){t.addClass("siebui-cal-quick-add-helper");return}$(t.find(".fc-title")[0]).length===0&&(t.find(".fc-content").append('<div class="fc-title"></div>'),t.find(".fc-content").css("height",t.css("height")));var f=$(t.find(".fc-title")[0]),l=r.Get("Available Days")||[],c=new Date(e.start),h=c.getDay(),p=l.indexOf(h);n.name==="agendaDay"&&(p=0);var d=e.displayFieldOne.replace(/\s/g,"");t.attr("rn","slot-"+p+"-"+e.start.format("HHmmss")+d),t.attr("un",e.id),t.attr("ot","CalendarEvent"),t.attr("data-drilldown",e.dataDrilldown);if(n.name==="month"&&r.Get("Enable BusyFreeTime")==="Y")return t.remove(),!1;if(e.icons)for(a=0;a<e.icons.length;a++){var v=e.icons[a],m=e.iconText[a];v!==""&&(o+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_IMAGECONTROL"),src:"images/"+v,attrs:"title = '"+m+"' alt= '"+m+"'"}))}var g=e.multiDisplay;for(var y=0;y<g.length;y++){var b=g[y],w=s[b.CSSName];w||(f.addClass(b.CSSName),w=$("."+b.CSSName).css("color"),w?w=this.GetUtilityMap().Rgb2hex(w):w="NOCSSFONTCOLOR",f.removeClass(b.CSSName),s[b.CSSName]=w),w!=="NOCSSFONTCOLOR"&&w!=="#111111"&&(b.FieldColor=w),b.FieldColor=b.FieldColor||"#111111";var E=this.GetUtilityMap().MakeDisplayField(b);E!==""&&(u+=E)}r.AddProperty("CSSFontColors",s),f.prepend(o+"&nbsp;"+u),t.find(".fc-time").text("");if(!e.allDay&&r.ExecuteMethod("IsTimeStampRequired",e.start,e.end)){var S=e.start,x=e.end;e.isZeroDuration&&(x=e.start);var T=r.ExecuteMethod("GetTimeStampFormat",S,x),N=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({className:"siebui-cal-timestamp",type:consts.get("SWE_CTRL_PLAINTEXT"),value:$.fullCalendar.formatRange(S,x,T)+" "});f.parent().prepend(N)}},OnEventAfterRender:function(e,t,n){var r=this.GetPM(),i=this.GetCal(),s,o=$(t.find(".fc-title")[0]);o.find("a").tooltip({content:o.find("a").attr("title"),position:r.Get("RTL Mode")!=="Y"?{}:{my:"right top",at:"right bottom",of:r.Get("ViewMode")==="2"?$(t.find(".fc-content")[0]):o,collision:"fit flip"},tooltipClass:"siebui-tooltip-calendar"}),t.draggable({delay:250});var u=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper");if(u){var a,f,l=!1,c=!1;u.Manage(t,["tap"],function(){t.trigger("click"),t.draggable("enable")}),u.Manage(t,"mousedown",function(e){l=!0,c=!1,a=e.pageX,f=e.pageY}),u.Manage(t,"mousemove",function(e){l===!0&&(Math.abs(e.pageX-a)>5||Math.abs(e.pageY-f)>5)&&(c=!0)}),u.Manage(t,"mouseup",function(){c||t.draggable("disable"),l=!1})}if(n.name!=="month"){var h=e.source||{},p=function(e){return i.fullCalendar("option",e)},d=[e.durationEditable,h.durationEditable,p("eventDurationEditable"),e.editable,h.editable,p("editable")],v,m=this;for(s=0;s<d.length;s++)if(d[s]!==undefined){v=d[s];break}var g=SiebelJS.Dependency("SiebelApp.Utils");if(v&&!e.allDay&&!g.IsEmpty(e.start)&&!g.IsEmpty(e.end)){t.find(".fc-resizer").remove();var y=Math.max(i.find(".fc-slats tr").height(),21),b=parseInt(r.Get("Preferred Timeslot Interval"),10),w=e.end.diff(e.start,"m"),E=y;w%b!=0&&(E=w%b*y/b);var S=bMutateEnd=!1,x="";t.hasClass("fc-start")&&t.hasClass("fc-end")?x="n,s":t.hasClass("fc-start")?x="n":t.hasClass("fc-end")&&(x="s"),x.length!==0&&t.resizable({handles:x,grid:y,minHeight:E,start:function(e,n){t.css("min-height",E+"px"),$(e.originalEvent.target).hasClass("ui-resizable-n")?S=!0:$(e.originalEvent.target).hasClass("ui-resizable-s")&&(bMutateEnd=!0)},stop:function(n,r){var s,o;t.height
()<=r.originalSize.height&&w<=b?s=0:s=Math.round((Math.max(E,t.height())-r.originalSize.height)/y);if(S){o=$.fullCalendar.moment(e.start);var u=$.fullCalendar.moment(e.start);u.subtract(s*b,"m"),e.start=u,m.OnEventResize(e,s,function(){e.start=o,i.fullCalendar("rerenderEvents")},n,r)}else if(bMutateEnd){o=$.fullCalendar.moment(e.end);var a=$.fullCalendar.moment(e.end);a.add(s*b,"m"),e.end=a,m.OnEventResize(e,s,function(){e.end=o,i.fullCalendar("rerenderEvents")},n,r)}t.css("min-height","22px")}}),t.on("mousedown",function(e){if($(e.target).hasClass("ui-resizable-n")||$(e.target).hasClass("ui-resizable-s"))e.preventDefault(),e.stopPropagation()})}}t.removeClass("fc-state-highlight"),t.find(".ui-resizable-handle").empty()},OnEventClick:function(e,t,n){var r=this.GetPM(),i=this.GetCal(),s={id:e.id},o=r.Get("CurViewStartDate").format("MM/DD/YYYY"),u=r.Get("CurViewEndDate").format("MM/DD/YYYY");r.Get("EventClickInProgress")&&r.SetProperty("EventClickInProgress",!1),i.fullCalendar("gotoDate",e.start),r.AddProperty("SelectedDate",i.fullCalendar("getDate").toDate());var a=r.Get("CurViewStartDate").format("MM/DD/YYYY"),f=r.Get("CurViewEndDate").format("MM/DD/YYYY");if(r.Get("ViewMode")!=="2"||o===a&&u===f){var l=t.target||t.srcElement,c=$(l).closest("[data-drilldown]").attr("data-drilldown");r.Get("UseCalendarPane")==="Y"?(s.left=$(t.currentTarget).offset().left,s.width=$(t.currentTarget).width(),r.SetProperty("SelectedEvent",s),r.OnControlEvent("eventSelection",c)):r.OnControlEvent(SiebelApp.Constants.get("PHYEVENT_DRILLDOWN_LIST"),c)}else r.SetProperty("EventClickInProgress",!0),r.SetProperty("SelectedEvent",s)},OnEventLimitClick:function(e,t){var n=this.GetPM(),r=this.GetCal(),i=this.GetUtilityMap().SplitViewName(r.fullCalendar("getView").name);r.find(".siebui-cal-btn-"+i).removeClass("disabled"),r.find(".siebui-cal-btn-"+i+"-txt").removeClass("disabled");var s=n.Get("Monthly More Click");if(!s)s="agendaDay";else{s=s.toLowerCase();if(s==="daily")s="agendaDay";else if(s==="weekly")s="agendaWeek";else if(s==="popover")s="popover";else if(s==="drilldown"){var o=e.hiddenSegs[0].event.dataDrilldown;n.OnControlEvent(SiebelApp.Constants.get("PHYEVENT_DRILLDOWN_LIST"),o);return}}return s},OnEventDestroy:function(e,t,n){var r=$(t.find(".fc-title")[0]).find("a");r.data("ui-tooltip")&&r.tooltip("destroy"),t.data("ui-draggable")&&t.draggable("destroy"),t.data("ui-resizable")&&t.resizable("destroy"),r.off()},OnEventDrop:function(e,t,n,r){var i=this.GetCal();if(e.readOnly!=="N"||e.allDay!==e.origAllDay)n();else{if(e.repeating==="N"){this.GetPM().OnControlEvent("eventDrop",e.start.format("MM/DD/YYYY HH:mm:ss"),e.end.format("MM/DD/YYYY HH:mm:ss"),e.calendarId,null),i.fullCalendar("refetchEvents");return}this.GetCalCtrlBuilder().BuildRepeatDialog(e,"eventDrop",n,function(){i.fullCalendar("refetchEvents")})}},OnEventDragStop:function(e,t,n,r){var i=this.GetCal(),s=i.find(".fc-view-container").width(),o=i.find(".fc-view-container").height(),u=i.find(".fc-view-container").offset(),a=u.left+s,f=u.top+o;(t.pageX<u.left||t.pageX>a||t.pageY<u.top||t.pageY>f)&&i.fullCalendar("refetchEvents")},OnEventResize:function(e,t,n,r,i){var s=this.GetCal();if(e.readOnly!=="N")n();else{if(e.repeating==="N"){this.GetPM().OnControlEvent("eventResize",e.start.format("MM/DD/YYYY HH:mm:ss"),e.end.format("MM/DD/YYYY HH:mm:ss"),e.calendarId,null),s.fullCalendar("refetchEvents");return}this.GetCalCtrlBuilder().BuildRepeatDialog(e,"eventResize",n,function(){s.fullCalendar("refetchEvents")})}},OnEventRefresh:function(e,t,n,r){var i=this.GetPM();i.AddProperty("CurViewShowDate",moment(e)),i.AddProperty("CurViewStartDate",moment(e)),i.AddProperty("CurViewEndDate",moment(t)),i.AddProperty("SelectedDate",this.GetCal().fullCalendar("getDate").toDate()),i.ExecuteMethod("GetCalendarData"),r([])},OnExtJQueryDropHandler:function(e,t,n,r,i){var s=this.GetPM(),o=this.GetCal();if(s.Get("CanInsert")&&$.data(i).appletRowId){t.preventDefault();var u=moment(e);u.add(o.fullCalendar("option","slotDuration"),"m");var a=[{id:"tmp1",title:"",start:e,end:u,url:"",multiDisplay:[],repeating:"N",readOnly:"N",displayFieldOne:"",className:"fc-event-skin calendar-EventStyle-Placeholder",allDay:!1,editable:!0}];o.fullCalendar("addEventSource",a),s.OnControlEvent("externalDrop",e.format("MM/DD/YYYY HH:mm:ss"),$.data(i).appletRowId.appletName,$.data(i).appletRowId.rowId,null),o.fullCalendar("refetchEvents")}},OnExtHTMLDropHandler:function(e){e.preventDefault();var t;e.originalEvent.dataTransfer&&(t=e.originalEvent.dataTransfer.getData("Text"));if(t){var n;t.indexOf("\r")!==-1?n=t.replace(/\n/g,"").split("\r"):n=t.split("\n");var r=[],i=[],s,o;if(n.length-1<=1){SiebelJS.Log("ERROR: Expected data but only received header row");return}for(s=0;s<n.length-1;s++){var u=n[s].split("	"),a=[];for(o=0;o<u.length;o++)if(s===0){var f=u[o].replace("\n","");if(f===""){SiebelJS.Log("ERROR: Empty field name received in header row.");return}r.push(f)}else a.push(u[o].replace("\n",""));s!==0&&i.push(a)}var l=i.length;for(s=0;s<l;s++){var c=CCFMiscUtil_CreatePropSet(),h=r.length;for(o=0;o<h;o++)c.SetProperty(r[o],i[s][o]);e.data.ctx.GetPM().OnControlEvent("externalDrop",null,null,null,c)}e.data.ctx.GetCal().fullCalendar("refetchEvents")}},OnViewDisplayChange:function(e){var t=this.GetPM(),n=this.GetCal(),r=this.GetCalCtrlBuilder(),i=this.GetUtilityMap().SplitViewName(e.name);n.find(".siebui-cal-btn-"+i).addClass("disabled"),n.find(".siebui-cal-btn-"+i+"-txt").addClass("disabled");var s=moment().format("YYYY-MM-DD"),o=$.fullCalendar.moment(s);!o.isBefore(e.start)&&o.isBefore(e.end)?n.find(".siebui-cal-btn-today").addClass("disabled"):n.find(".siebui-cal-btn-today").removeClass("disabled"),n.find(".siebui-cal-hdr-wrapper").removeClass().addClass("siebui-cal-hdr-wrapper"),n.find(".siebui-cal-hdr-wrapper").addClass("siebui-cal-"+i+"-hdr"),e.name==="agendaWeek"&&r.BldWeekColHdr(e),(e.name==="agendaDay"||e.name==="agendaWeek")&&r.BldSlotIndicators(e),e.name==="month"&&t.Get("Enable BusyFreeTime")==="Y"&&
n.find(".fc-grid .fc-day-content").addClass("siebui-no-height")}},e}(),SiebelAppFacade.CalUtility=function(){function e(){}return e.prototype={EventSortOrder:function(e,t){return e.start-t.start},GetObjectSize:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&(t+=1);return t},Hex:function(e){return("0"+parseInt(e,10).toString(16)).slice(-2)},IsAllDayEvent:function(e){if(e.AllDayFlag==="Y")return!0;if(e.Planned<=e.PlannedCompletion){var t=e.Planned,n=e.PlannedCompletion;if(t.hour()===0&&t.minute()===0&&t.second()===0&&n.hour()===0&&n.minute()===0&&n.second()===0)return!0}return!1},MakeDisplayField:function(e){var t=e.FieldValue,n=$("<div />").text(e.ToolTip).html(),r=e.DrillDown,i=e.FieldColor,s="";if(t==="")return s;var o=n.split("&lt;br /&gt;"),u=45;for(var a=0;a<o.length;a++)o[a].length>u&&(o[a]=o[a].substring(0,u).split(" ").slice(0,-1).join(" ")+"...");return n=o.join("&lt;br /&gt;"),s+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_LINK"),attrs:'title="'+n+'" data-drilldown="'+r+'"',value:SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:consts.get("SWE_CTRL_PLAINTEXT"),className:e.CSSName+" fc-title siebui-cal-drilldown",value:t})}),i!==""&&$("."+e.CSSName).css("color",i),s},Rgb2hex:function(e){return e.search("rgb")===-1?e:(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/),"#"+this.Hex(e[1])+this.Hex(e[2])+this.Hex(e[3]))},SortOrder:function(e,t){return e[1]>t[1]?1:-1},SplitViewName:function(e){var t="",n=e.match(/[A-Z]*[^A-Z]+/g);for(var r=0;r<n.length;r++)t+=n[r].toLowerCase(),r!==n.length-1&&(t+="-");return t},ViewModeToName:function(e){var t="agendaDay";return e==="0"?t="agendaDay":e==="1"?t="agendaWeek":e==="2"&&(t="month"),t},ViewNameToMode:function(e){var t="0";return e==="agendaDay"?t="0":e==="agendaWeek"?t="1":e==="month"&&(t="2"),t},AttachAutoAttributes:function(e,t,n){typeof e!="undefined"&&e.attr({rn:n,ot:t,un:n})}},e}(),SiebelAppFacade.CalLocaleConverter=function(){function e(){var e={"hh:mm:ss":function(e){return o(e)},"mm:hh:ss":function(e){return o(e)},"ss:mm:hh":function(e){return o(e)},"mm:ss:hh":function(e){return o(e)},"hh:ss:mm":function(e){return o(e)},"ss:hh:mm":function(e){return o(e)},"h:mm:ss":function(e){return o(e)},"mm:h:ss":function(e){return o(e)},"ss:mm:h":function(e){return o(e)},"mm:ss:h":function(e){return o(e)},"ss:h:mm":function(e){return o(e)},"h:ss:mm":function(e){return o(e)},"m:hh:ss":function(e){return o(e)},"ss:m:hh":function(e){return o(e)},"hh:m:ss":function(e){return o(e)},"m:ss:hh":function(e){return o(e)},"hh:ss:m":function(e){return o(e)},"ss:hh:m":function(e){return o(e)},"hh:mm:s":function(e){return o(e)},"mm:hh:s":function(e){return o(e)},"s:mm:hh":function(e){return o(e)},"s:hh:mm":function(e){return o(e)},"mm:s:hh":function(e){return o(e)},"hh:s:mm":function(e){return o(e)},"h:m:ss":function(e){return o(e)},"m:h:ss":function(e){return o(e)},"ss:m:h":function(e){return o(e)},"ss:h:m":function(e){return o(e)},"m:ss:h":function(e){return o(e)},"h:ss:m":function(e){return o(e)},"hh:m:s":function(e){return o(e)},"hh:s:m":function(e){return o(e)},"m:hh:s":function(e){return o(e)},"s:hh:m":function(e){return o(e)},"s:m:hh":function(e){return o(e)},"m:s:hh":function(e){return o(e)},"h:mm:s":function(e){return o(e)},"mm:h:s":function(e){return o(e)},"mm:s:h":function(e){return o(e)},"s:mm:h":function(e){return o(e)},"h:s:mm":function(e){return o(e)},"s:h:mm":function(e){return o(e)},"h:m:s":function(e){return o(e)},"m:h:s":function(e){return o(e)},"s:m:h":function(e){return o(e)},"hh:mm":function(e){return o(e,"hm")},"mm:hh":function(e){return o(e,"hm")},"h:mm":function(e){return o(e,"hm")},"mm:h":function(e){return o(e,"hm")},"hh:m":function(e){return o(e,"hm")},"m:hh":function(e){return o(e,"hm")},"h:m":function(e){return o(e,"hm")},"m:h":function(e){return o(e,"hm")},"ss:mm":function(e){return o(e,"ms")},"ss:m":function(e){return o(e,"ms")},"m:ss":function(e){return o(e,"ms")},"mm:s":function(e){return o(e,"ms")},"s:mm":function(e){return o(e,"ms")},"s:m":function(e){return o(e,"ms")},"m:s":function(e){return o(e,"ms")},"dd/mm/yyyy":function(e){return u(e)},"mm/dd/yyyy":function(e){return u(e)},"dd/yyyy/mm":function(e){return u(e)},"yyyy/dd/mm":function(e){return u(e)},"mm/yyyy/dd":function(e){return u(e)},"yyyy/mm/dd":function(e){return u(e)},"d/mm/yyyy":function(e){return u(e)},"mm/d/yyyy":function(e){return u(e)},"d/yyyy/mm":function(e){return u(e)},"yyyy/d/mm":function(e){return u(e)},"mm/yyyy/d":function(e){return u(e)},"yyyy/mm/d":function(e){return u(e)},"dd/m/yyyy":function(e){return u(e)},"m/dd/yyyy":function(e){return u(e)},"dd/yyyy/m":function(e){return u(e)},"yyyy/dd/m":function(e){return u(e)},"m/yyyy/dd":function(e){return u(e)},"yyyy/m/dd":function(e){return u(e)},"dd/mm/yy":function(e){return u(e)},"mm/dd/yy":function(e){return u(e)},"dd/yy/mm":function(e){return u(e)},"yy/dd/mm":function(e){return u(e)},"mm/yy/dd":function(e){return u(e)},"yy/mm/dd":function(e){return u(e)},"d/m/yyyy":function(e){return u(e)},"m/d/yyyy":function(e){return u(e)},"d/yyyy/m":function(e){return u(e)},"yyyy/d/m":function(e){return u(e)},"m/yyyy/d":function(e){return u(e)},"yyyy/m/d":function(e){return u(e)},"d/mm/yy":function(e){return u(e)},"mm/d/yy":function(e){return u(e)},"d/yy/mm":function(e){return u(e)},"yy/d/mm":function(e){return u(e)},"mm/yy/d":function(e){return u(e)},"yy/mm/d":function(e){return u(e)},"dd/m/yy":function(e){return u(e)},"m/dd/yy":function(e){return u(e)},"dd/yy/m":function(e){return u(e)},"yy/dd/m":function(e){return u(e)},"m/yy/dd":function(e){return u(e)},"yy/m/dd":function(e){return u(e)},"d/m/yy":function(e){return u(e)},"m/d/yy":function(e){return u(e)},"d/yy/m":function(e){return u(e)},"yy/d/m":function(e){return u(e)},"m/yy/d":function(e){return u(e)},"yy/m/d":function(e){return u(e)},"mm/yyyy":function(e){return u(e,"my")},"yyyy/mm":function(e){return u(e,"my")},"yyyy/m":function(e){return u(e,"my")},"m/yyyy":function(e){return u(e,"my")},"mm/yy":function(
e){return u(e,"my")},"yy/mm":function(e){return u(e,"my")},"yy/m":function(e){return u(e,"my")},"m/yy":function(e){return u(e,"my")},"dd/mm":function(e){return u(e,"md")},"mm/dd":function(e){return u(e,"md")},"dd/m":function(e){return u(e,"md")},"m/dd":function(e){return u(e,"md")},"d/mm":function(e){return u(e,"md")},"mm/d":function(e){return u(e,"md")},"d/m":function(e){return u(e,"md")},"m/d":function(e){return u(e,"md")},s:function(e){return e.s},ss:function(e){return e.s},m:function(e){return e.n},mm:function(e){return e.n},h:function(e){return e.h},hh:function(e){return e.h},H:function(e){return e.h},HH:function(e){return e.h},d:function(e){return e.ld},dd:function(e){return e.ld},M:function(e){return e.lm},MM:function(e){return e.lm},yy:function(e){return e.ly},yyyy:function(e){return e.ly},ddd:function(e){return"ddd"},dddd:function(e){return"dddd"},MMM:function(e){return"MMM"},MMMM:function(e){return"MMMM"},t:function(e){return e.h24?"":e.p},a:function(e){return e.h24?"":e.p},T:function(e){return e.h24?"":e.p.toUpperCase()},A:function(e){return e.h24?"":e.p.toUpperCase()},"//":function(e){return"/"},"/":function(e){return e.ds},"::":function(e){return":"},":":function(e){return e.ts}};this.getFormatConverter=function(){return e}}function t(e){var t,n,r,s,o="",u=SiebelApp.S_App.LocaleObject.GetDateFormat(),a=u.length;for(t=0;t<a;t++)for(n=a;n>t;n--)r=i(u.substring(t,n),e,!1),r&&r!==e.ds&&(t=n-1,e=r);return e}function n(e,t){var n,r,s,o,u="",a="",f=t.length,l=t.toUpperCase(),c=[],h;for(n=0;n<f;n++){u=l.charAt(n);if(u==="'")for(r=n+1;r<f;r++)if(l.charAt(r)==="'"){if(r-n===2&&c.length>0){h="["+l.charAt(n+1)+"]";var p=c.pop();switch(p){case"ld":e=$.extend(!0,{},e,{symbLd:h});break;case"lm":e=$.extend(!0,{},e,{symbLm:h});break;case"ly":e=$.extend(!0,{},e,{symbLy:h})}}n=r;break}for(s=f;s>n;s--)o=i(l.substring(n,s),e,!0,c),o&&o!==e.ds&&(n=s-1,e=o)}return e}function r(e){var t,n,r,s,o="",u=SiebelApp.S_App.LocaleObject.GetTimeFormat(),a=u.length;for(t=0;t<a;t++)for(n=a;n>t;n--)r=i(u.substring(t,n),e,!1),r&&r!==e.ts&&(t=n-1,e=r);return e}function i(e,t,n,r){var i;switch(e){case t.ds:i=t.ds;break;case t.ts:i=t.ts;break;case"DDDD":n&&(i=t);break;case"DDD":n&&(i=t);break;case"DD":n?(i=$.extend(!0,{},t,{ld:"DD",ldf:t.ldf.concat("d")}),r.push("ld")):i=$.extend(!0,{},t,{d:"DD",df:t.df.concat("d")});break;case"D":n?(i=$.extend(!0,{},t,{ld:"D",ldf:t.ldf.concat("d")}),r.push("ld")):i=$.extend(!0,{},t,{d:"D",df:t.df.concat("d")});break;case"MMMM":n?(i=$.extend(!0,{},t,{lm:"MMMM",ldf:t.ldf.concat("m")}),r.push("lm")):i=$.extend(!0,{},t,{m:"MMMM",df:t.df.concat("m")});break;case"MMM":n?(i=$.extend(!0,{},t,{lm:"MMM",ldf:t.ldf.concat("m")}),r.push("lm")):i=$.extend(!0,{},t,{m:"MMM",df:t.df.concat("m")});break;case"MM":n?(i=$.extend(!0,{},t,{lm:"MM",ldf:t.ldf.concat("m")}),r.push("lm")):i=$.extend(!0,{},t,{m:"MM",df:t.df.concat("m")});break;case"M":n?(i=$.extend(!0,{},t,{lm:"M",ldf:t.ldf.concat("m")}),r.push("lm")):i=$.extend(!0,{},t,{m:"M",df:t.df.concat("m")});break;case"YYYY":n?(i=$.extend(!0,{},t,{ly:"YYYY",ldf:t.ldf.concat("y")}),r.push("ly")):i=$.extend(!0,{},t,{y:"YYYY",df:t.df.concat("y")});break;case"YY":n?(i=$.extend(!0,{},t,{ly:"YY",ldf:t.ldf.concat("y")}),r.push("ly")):i=$.extend(!0,{},t,{y:"YY",df:t.df.concat("y")});break;case"HH":i=$.extend(!0,{},t,{h:"HH",h24:!0,tf:t.tf.concat("h")});break;case"H":i=$.extend(!0,{},t,{h:"H",h24:!0,tf:t.tf.concat("h")});break;case"hh":i=$.extend(!0,{},t,{h:"hh",tf:t.tf.concat("h")});break;case"h":i=$.extend(!0,{},t,{h:"h",tf:t.tf.concat("h")});break;case"mm":i=$.extend(!0,{},t,{n:"mm",tf:t.tf.concat("m")});break;case"m":i=$.extend(!0,{},t,{n:"m",tf:t.tf.concat("m")});break;case"ss":i=$.extend(!0,{},t,{s:"ss",tf:t.tf.concat("s")});break;case"s":i=$.extend(!0,{},t,{s:"s",tf:t.tf.concat("s")});break;case"p":i=$.extend(!0,{},t,{h24:!1,p:"tt"});break;default:return}return i}function s(e,t){var n,r=e.length,i,o,u,a="",f="";for(n=0;n<r;n++){i=e.charAt(n);if(i==="'"){a+="[";for(o=n+1;o<r;o++)if(e.charAt(o)==="'"){a+=e.substring(n+1,o),a+="]",n=o;break}}else if(i==="("){a+=i;for(o=n+1;o<r;o++)if(e.charAt(o)===")"){f=s.call(this,e.substring(n+1,o),t),a+=f,a+=")",n=o;break}}else{for(o=r;o>n;o--){u=this.getFormatConverter()[e.substring(n,o)]||this.getFormatConverter()[e.substring(n,o).toLowerCase()];if(u){a+=u(t),n=o-1;break}}o===n&&(a+=i)}}return a}function o(e,t){var n;switch(e.tf){case"hms":n=t==="hm"?e.h+e.ts+e.n:t==="ms"?e.n+e.ts+e.s:e.h+e.ts+e.n+e.ts+e.s;break;case"hsm":n=t==="hm"?e.h+e.ts+e.n:t==="ms"?e.s+e.ts+e.n:e.h+e.ts+e.s+e.ts+e.n;break;case"smh":n=t==="hm"?e.n+e.ts+e.h:t==="ms"?e.s+e.ts+e.n:e.s+e.ts+e.n+e.ts+e.h;break;case"shm":n=t==="hm"?e.h+e.ts+e.n:t==="ms"?e.s+e.ts+e.n:e.s+e.ts+e.h+e.ts+e.n;break;case"msh":n=t==="hm"?e.n+e.ts+e.h:t==="ms"?e.n+e.ts+e.s:e.n+e.ts+e.s+e.ts+e.h;break;case"mhs":n=t==="hm"?e.n+e.ts+e.h:t==="ms"?e.n+e.ts+e.s:e.n+e.ts+e.h+e.ts+e.s}return n+=e.h24?e.p:"",n}function u(e,t){switch(e.df){case"dmy":return t==="my"?e.m+e.ds+e.y:t==="md"?e.d+e.ds+e.m:e.d+e.ds+e.m+e.ds+e.y;case"mdy":return t==="my"?e.m+e.ds+e.y:t==="md"?e.m+e.ds+e.d:e.m+e.ds+e.d+e.ds+e.y;case"dym":return t==="my"?e.y+e.ds+e.m:t==="md"?e.d+e.ds+e.m:e.d+e.ds+e.y+e.ds+e.m;case"myd":return t==="my"?e.m+e.ds+e.y:t==="md"?e.m+e.ds+e.d:e.m+e.ds+e.y+e.ds+e.d;case"ymd":return t==="my"?e.y+e.ds+e.m:t==="md"?e.m+e.ds+e.d:e.y+e.ds+e.m+e.ds+e.d;case"ydm":return t==="my"?e.y+e.ds+e.m:t==="md"?e.d+e.ds+e.m:e.y+e.ds+e.d+e.ds+e.m}}function a(e){var t=e.ly,n=e.lm,r=e.ld;e.symbLy&&(t=t.concat(e.symbLy)),e.symbLm&&(n=n.concat(e.symbLm)),e.symbLd&&(r=r.concat(e.symbLd));switch(e.ldf){case"dmy":return r+" "+n+" "+t;case"mdy":return n+" "+r+" "+t;case"dym":return r+" "+t+" "+n;case"myd":return n+" "+t+" "+r;case"ymd":return t+" "+n+" "+r;case"ydm":return t+" "+r+" "+n;case"dm":return r+" "+n;case"md":return n+" "+r;case"my":return n+" "+t;case"ym":return t+" "+n}}return e.prototype.ConvertLocale=function(e){var i=this,o=[],u=[];for(var f=1;f<13;f++)o.push(SiebelApp.S_App.LocaleObject.GetMonth(f
)),u.push(SiebelApp.S_App.LocaleObject.GetMonth(f,!0));var l=[],c=[];for(var h=0;h<7;h++)l.push(SiebelApp.S_App.LocaleObject.GetDayOfWeek(h,0)),c.push(SiebelApp.S_App.LocaleObject.GetDayOfWeek(h,1));var p={ds:SiebelApp.S_App.LocaleObject.GetDispDateSeparator(),ts:SiebelApp.S_App.LocaleObject.GetDispTimeSeparator(),h24:!0,df:"",tf:"",ldf:"",p:"",monthNames:o,monthNamesShort:u,dayNames:l,dayNamesShort:c,periodName:[SiebelApp.S_App.LocaleObject.GetDispTimeAM().toLowerCase(),SiebelApp.S_App.LocaleObject.GetDispTimePM().toLowerCase()],periodShortName:[SiebelApp.S_App.LocaleObject.GetDispTimeAM().toLowerCase().charAt(0),SiebelApp.S_App.LocaleObject.GetDispTimePM().toLowerCase().charAt(0)]};p=t(p),p=r(p),p=n(p,e.longDateFormat);var d=p.ds.replace(/\\/g,"\\\\");return d=d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\^\$\|]/g,"\\\\$&"),$.fullCalendar.dateFormatters=$.extend(!0,{},$.fullCalendar.dateFormatters,{t:function(e,t){return e.hour()<12?t.periodShortName[0]:t.periodShortName[1]},tt:function(e,t){return e.hour()<12?t.periodName[0]:t.periodName[1]},T:function(e,t){return e.hour()<12?t.periodShortName[0].toUpperCase():t.periodShortName[1].toUpperCase()},TT:function(e,t){return e.hour()<12?t.periodName[0].toUpperCase():t.periodName[1].toUpperCase()}}),$.extend(!0,{},p,{views:{agendaDay:{columnFormat:s.call(i,e.views.agendaDay.columnFormat,p),titleFormat:s.call(i,e.views.agendaDay.titleFormat,p)},agendaWeek:{columnFormat:s.call(i,e.views.agendaWeek.columnFormat,p).replace(/\s/g,"%").replace(new RegExp(d),p.ds+"%"),titleFormat:a.call(i,p)},month:{columnFormat:s.call(i,e.views.month.columnFormat,p),titleFormat:s.call(i,e.views.month.titleFormat,p)}},timeFormat:{"":s.call(i,e.timeFormat,p)}})},e}(),"SiebelAppFacade.JQFullCalRenderer"}));
